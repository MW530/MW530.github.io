<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="utf-8">
  
  <title>canvas基础 | My Wonderland</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  
  <meta name="keywords" content="JavaScriptCanvas">
  
  
  
  
  <meta name="description" content="创建canvas画布css: canvas{             border:3px solid blue;         }  html: &amp;lt;canvas width=&amp;quot;700&amp;quot; height=&amp;quot;700&amp;quot; id=&amp;quot;myCanvas&amp;quot;&amp;gt;         您的浏览器不支持canvas，请更换浏览器访问！     &amp;lt;">
<meta name="keywords" content="JavaScript,Canvas">
<meta property="og:type" content="article">
<meta property="og:title" content="canvas基础">
<meta property="og:url" content="http://yoursite.com/2019/03/10/canvas基础/index.html">
<meta property="og:site_name" content="My Wonderland">
<meta property="og:description" content="创建canvas画布css: canvas{             border:3px solid blue;         }  html: &amp;lt;canvas width=&amp;quot;700&amp;quot; height=&amp;quot;700&amp;quot; id=&amp;quot;myCanvas&amp;quot;&amp;gt;         您的浏览器不支持canvas，请更换浏览器访问！     &amp;lt;">
<meta property="og:locale" content="zh-Hans">
<meta property="og:image" content="http://yoursite.com/images/Canvas基础/六边形.png">
<meta property="og:image" content="http://yoursite.com/images/Canvas基础/径向渐变.png">
<meta property="og:image" content="http://yoursite.com/images/Canvas基础/图像组合.png">
<meta property="og:image" content="http://yoursite.com/images/Canvas基础/textAlign.png">
<meta property="og:image" content="http://yoursite.com/images/Canvas基础/textBaseline.gif">
<meta property="og:updated_time" content="2019-03-10T14:25:16.783Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="canvas基础">
<meta name="twitter:description" content="创建canvas画布css: canvas{             border:3px solid blue;         }  html: &amp;lt;canvas width=&amp;quot;700&amp;quot; height=&amp;quot;700&amp;quot; id=&amp;quot;myCanvas&amp;quot;&amp;gt;         您的浏览器不支持canvas，请更换浏览器访问！     &amp;lt;">
<meta name="twitter:image" content="http://yoursite.com/images/Canvas基础/六边形.png">
  
    <link rel="alternate" href="/atom.xml" title="My Wonderland" type="application/atom+xml">
  

  

  <link rel="icon" href="/css/images/mylogo.jpg">
  <link rel="apple-touch-icon" href="/css/images/mylogo.jpg">
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link href="https://fonts.googleapis.com/css?family=Open+Sans|Montserrat:700" rel="stylesheet" type="text/css">
  <link href="https://fonts.googleapis.com/css?family=Roboto:400,300,300italic,400italic" rel="stylesheet" type="text/css">
  <link href="//cdn.bootcss.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet">
  <style type="text/css">
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/9749f0/00000000000000000001008f/27/l?subset_id=2&fvd=n5) format("woff2");font-weight:500;font-style:normal;}
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/90cf9f/000000000000000000010091/27/l?subset_id=2&fvd=n7) format("woff2");font-weight:500;font-style:normal;}
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/8a5494/000000000000000000013365/27/l?subset_id=2&fvd=n4) format("woff2");font-weight:lighter;font-style:normal;}
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/d337d8/000000000000000000010095/27/l?subset_id=2&fvd=i4) format("woff2");font-weight:400;font-style:italic;}</style>
  <link rel="stylesheet" href="/css/style.css">

  <script src="/js/jquery-3.1.1.min.js"></script>
  <script src="/js/bootstrap.js"></script>

  <!-- Bootstrap core CSS -->
  <link rel="stylesheet" href="/css/bootstrap.css">

  
    <link rel="stylesheet" href="/css/dialog.css">
  

  

  
    <link rel="stylesheet" href="/css/header-post.css">
  

  
  
  
    <link rel="stylesheet" href="/css/vdonate.css">
  

</head>
</html>


  <body data-spy="scroll" data-target="#toc" data-offset="50">


  
  <div id="container">
    <div id="wrap">
      
        <header>

    <div id="allheader" class="navbar navbar-default navbar-static-top" role="navigation">
        <div class="navbar-inner">
          
          <div class="container"> 
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
              <span class="sr-only">Toggle navigation</span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
            </button>

            
              <a class="brand" style="
                 margin-top: 0px;"  
                href="#" data-toggle="modal" data-target="#myModal" >
                  <img width="124px" height="124px" alt="Hike News" src="/css/images/mylogo.jpg">
              </a>
            
            
            <div class="navbar-collapse collapse">
              <ul class="hnav navbar-nav">
                
                  <li> <a class="main-nav-link" href="/">Home</a> </li>
                
                  <li> <a class="main-nav-link" href="/archives">Archives</a> </li>
                
                  <li> <a class="main-nav-link" href="/categories">Categories</a> </li>
                
                  <li> <a class="main-nav-link" href="/tags">Tags</a> </li>
                
                  <li> <a class="main-nav-link" href="/about">About</a> </li>
                
                  <li><div id="search-form-wrap">

    <form class="search-form">
        <input type="text" class="ins-search-input search-form-input" placeholder="" />
        <button type="submit" class="search-form-submit"></button>
    </form>
    <div class="ins-search">
    <div class="ins-search-mask"></div>
    <div class="ins-search-container">
        <div class="ins-input-wrapper">
            <input type="text" class="ins-search-input" placeholder="Type something..." />
            <span class="ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
(function (window) {
    var INSIGHT_CONFIG = {
        TRANSLATION: {
            POSTS: 'Posts',
            PAGES: 'Pages',
            CATEGORIES: 'Categories',
            TAGS: 'Tags',
            UNTITLED: '(Untitled)',
        },
        ROOT_URL: '/',
        CONTENT_URL: '/content.json',
    };
    window.INSIGHT_CONFIG = INSIGHT_CONFIG;
})(window);
</script>
<script src="/js/insight.js"></script>

</div></li>
            </div>
          </div>
                
      </div>
    </div>

</header>



      
            
      <div id="content" class="outer">
        
          <section id="main" style="float:none;"><article id="post-canvas基础" style="width: 75%; float:left;" class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" class="article-title" itemprop="name">
      canvas基础
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	<a href="/2019/03/10/canvas基础/" class="article-date">
	  <time datetime="2019-03-10T13:56:25.000Z" itemprop="datePublished">2019-03-10</time>
	</a>

      
    <a class="article-category-link" href="/categories/Canvas/">Canvas</a>

      
	<a class="article-views">
	<span id="busuanzi_container_page_pv">
		PV:<span id="busuanzi_value_page_pv"></span>
	</span>
	</a>

    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="创建canvas画布"><a href="#创建canvas画布" class="headerlink" title="创建canvas画布"></a>创建canvas画布</h1><pre><code>css:
canvas{
            border:3px solid blue;
        }

html:
&lt;canvas width=&quot;700&quot; height=&quot;700&quot; id=&quot;myCanvas&quot;&gt;
        您的浏览器不支持canvas，请更换浏览器访问！
    &lt;/canvas&gt;

Javascript:

    &lt;script&gt;
        let canvas = document.getElementById(&quot;myCanvas&quot;);
        let ctx = canvas.getContext(&quot;2d&quot;);
    &lt;/script&gt;
</code></pre><a id="more"></a>
<p>Point:</p>
<ol>
<li>canvas标签是一个双标签，其内部写的是当浏览器不支持canvas时显示的内容，可以插入其他元素，比如文字，图片等。</li>
<li>canvas画布的宽高因该在其标签内定义，不能在其CSS内定义，否则其绘制的图像会按照300*150发生缩放。</li>
<li><p>所有绘图行为都在script标签中进行。</p>
<p> let ctx = canvas.getContext(“2d”);</p>
</li>
</ol>
<p>所有canvas的API都是定义在该对象上的，其中参数可以是2D，或者3D.</p>
<h1 id="Canvas绘制图像"><a href="#Canvas绘制图像" class="headerlink" title="Canvas绘制图像"></a>Canvas绘制图像</h1><p>canvas的绘制图形有两种方式：</p>
<ul>
<li>context.fill()</li>
</ul>
<p>fill()指的是填充，其默认颜色是黑色，可以在使用fill()之前使用fillStyle()方法改变填充颜色，如果是闭合图像，那么就直接填充。如果是非闭合的路径，则fill()先帮其闭合，然后填充。</p>
<pre><code>ctx.fillStyle = &quot;red&quot;;//设置填充色
ctx.fillRect(10,10,100,100);//绘制一个填充矩形
</code></pre><ul>
<li>context.stroke()</li>
</ul>
<p>stroke()方法会实际的绘制出moveTo()和lineTo()方法的路径。默认颜色是黑色，在绘制之前，可以使用strokeStyle()进行设置。</p>
<pre><code>ctx.strokeStyle = &quot;red&quot;;//设置边框填充色
ctx.strokeRect(10,10,100,100);//绘制空心矩形
</code></pre><h1 id="绘制矩形"><a href="#绘制矩形" class="headerlink" title="绘制矩形"></a>绘制矩形</h1><h2 id="绘制基本矩形"><a href="#绘制基本矩形" class="headerlink" title="绘制基本矩形"></a>绘制基本矩形</h2><pre><code>ctx.fillRect(x,y,height,width)//实心矩形
ctx.strokeRect(x,y,height,width)//空心边框
</code></pre><ul>
<li>x:起点的x坐标(即左上角的x坐标)</li>
<li>y:起点的y坐标(即左上角的y坐标)</li>
<li>height:矩形的高</li>
<li>width:矩形的宽</li>
</ul>
<h2 id="改变颜色"><a href="#改变颜色" class="headerlink" title="改变颜色"></a>改变颜色</h2><pre><code>ctx.fillStyle = &quot;red&quot;;//设置填充颜色
ctx.fillRect(10,10,100,100);
ctx.strokeStyle = &quot;red&quot;;//设置边框颜色
ctx.strokeRect(200,200,100,100);
</code></pre><p><strong>Point:</strong></p>
<ul>
<li>ctx.fillStyle = “red”用来设置填充颜色</li>
<li>ctx.strokeStyle = “red”用来设置边框颜色</li>
<li>这些描述都要放在绘制图形之前声明</li>
</ul>
<h2 id="擦除矩形区域"><a href="#擦除矩形区域" class="headerlink" title="擦除矩形区域"></a>擦除矩形区域</h2><ul>
<li><p>ctx.clearRect(x,y,height,width)</p>
<p>  ctx.clearRect(50,50,200,200)//绘制一个矩形区域并擦除该区域之前的内容</p>
</li>
</ul>
<h1 id="绘制圆形"><a href="#绘制圆形" class="headerlink" title="绘制圆形"></a>绘制圆形</h1><h2 id="绘制基本圆"><a href="#绘制基本圆" class="headerlink" title="绘制基本圆"></a>绘制基本圆</h2><h3 id="实心圆"><a href="#实心圆" class="headerlink" title="实心圆"></a>实心圆</h3><ul>
<li><p>ctx.arc(x,y,radius,starAngle,endAngle,anticlockwise)</p>
</li>
<li><p>x:圆心的x坐标</p>
</li>
<li>y:圆心的y坐标</li>
<li>radius:半径</li>
<li>startAngle:开始角度</li>
<li>endAngle:结束角度</li>
<li>anticlockwise:旋转方向，true:逆时针(可选参数，默认为false)</li>
<li><p>false:顺时针</p>
<pre><code>ctx.fillStyle = &quot;red&quot;; //设置填充色
ctx.arc(200,200,50,0,Math.PI*2,true);//绘制圆形
ctx.fill();//填充
</code></pre></li>
</ul>
<h3 id="空心圆"><a href="#空心圆" class="headerlink" title="空心圆"></a>空心圆</h3><pre><code>ctx.beginPath()
ctx.arc(200,200,50,0,Math.PI*2,true);
ctx.strokeStyle = &quot;red&quot;; 
ctx.closePath();
ctx.stroke();
</code></pre><p><strong>Point</strong></p>
<p>上面用到了路径，实际ctx.arc()相当于是一个lineTo()的一个集合。利用其绘制出一个圆形，最后要关闭(ctx.cloePath())，以及要(stroke())才能完全绘制出该图形。</p>
<h3 id="非完整圆"><a href="#非完整圆" class="headerlink" title="非完整圆"></a>非完整圆</h3><p>如果要绘制一个非完整的圆，比如一个实心半圆，该如何绘制呢？</p>
<p>答案是使用arc方法中的startAngle和endAngle来改变。</p>
<pre><code>ctx.fillStyle = &quot;red&quot;;
ctx.arc(200,200,50,0,Math.PI,true);
</code></pre><p><strong>空心圆形</strong></p>
<pre><code>ctx.beginPath();
ctx.strokeStyle = &quot;red&quot;;
ctx.arc(400,400,100,0,Math.PI);
ctx.closePath();
ctx.stroke();
</code></pre><h2 id="绘制线段"><a href="#绘制线段" class="headerlink" title="绘制线段"></a>绘制线段</h2><ul>
<li>moveTo(x,y):把画笔移动至画布的制定位置，不创建线条</li>
<li>lineTo(x,y):添加一个点(x,y)</li>
<li><p>stroke():按照之前添加的点绘制路径</p>
<pre><code>ctx.strokeStyle = &quot;red&quot;;//设置填充色
ctx.moveTo(0,0);//将画笔移动至(0,0)
ctx.lineTo(100,100);//添加一个点(100,100)
ctx.stroke();//按点绘制路径
</code></pre></li>
</ul>
<p><strong>Point</strong></p>
<ul>
<li>如果没有在第一次指定moveTo(x,y)，则第一个lineTo(x,y) == moveTo(x,y)</li>
<li><p>如果在lineTo()后没有使用moveTo()方法，则依次连接，eg：</p>
<p>  ctx.moveTo(0,0);<br>  ctx.lineTo(10,10);<br>  ctx.lineTo(20,20);<br>  ctx.lineTo(30,30);<br>  ctx.stroke();</p>
</li>
</ul>
<p>则画出后是一段从点(0,0)=&gt;(10,10)=&gt;(20,20)=&gt;(30,30)的一段折线。</p>
<ul>
<li>ctx.beginPath():开始一段路径</li>
<li>ctx.closePath()：闭合路径，即canvas会自动将未闭合的线段的首尾连接起来。</li>
</ul>
<p>eg(一个三角形):</p>
<pre><code>ctx.beginPath();
ctx.moveTo(0,0);
ctx.lineTo(10,10);
ctx.lineTo(20,20);
ctx.closePath();
ctx.stroke();
</code></pre><p>案例(六边形)：</p>
<p><img src="\images\Canvas基础\六边形.png" alt="六边形"></p>
<pre><code>var n = 0;
var dx = 150;//路径开始x坐标
var dy = 150;//路径开始y坐标
var s = 100;//边长
ctx.beginPath();//路径开始
ctx.fillStyle = &apos;pink&apos;;//设置填充色
ctx.strokeStyle = &apos;rgb(0,0,100)&apos;;//设置边框颜色
var dig = Math.PI / 3;//计算偏移角度
for (var i = 0; i &lt; 6; i++) {
var x = Math.sin(i * dig);//计算以下个点的x坐标的增量
var y = Math.cos(i * dig);//计算下一个点的y坐标的增量
ctx.lineTo(dx + x * s, dy + y * s);//绘制下一个点
//console.log( x ,y )
}
ctx.closePath();//闭合整个路径
ctx.fill();//设置填充
ctx.stroke();//绘制路径
</code></pre><p><strong>Point</strong></p>
<p>这个例子用了一点数学知识，主要是：</p>
<pre><code>for (var i = 0; i &lt; 6; i++) {
    var x = Math.sin(i * dig);//计算以下个点的x坐标的增量
    var y = Math.cos(i * dig);//计算下一个点的y坐标的增量
    ctx.lineTo(dx + x * s, dy + y * s);//绘制下一个点
    //console.log( x ,y )
    }
</code></pre><p>其原理是利用了简单的沟股定理，计算下一个点的坐标</p>
<h1 id="线性渐变"><a href="#线性渐变" class="headerlink" title="线性渐变"></a>线性渐变</h1><ul>
<li>let lg = ctx.createLinearGradient(xStart,yStart,xEnd,yEnd)</li>
<li>lg.addColorStop(offset,color)</li>
<li>xSart:渐变开始点的x坐标</li>
<li>yStart：渐变开始点的y坐标</li>
<li>xEnd：渐变结束点的x坐标</li>
<li>yEnd：渐变结束点的y坐标</li>
<li>offset:设定的颜色离渐变结束点的偏移量</li>
<li>color:绘制的颜色</li>
</ul>
<p>eg:<br>        let lg = ctx.createLinearGradient(0,0,100,200);<br>        lg.addColorStop(0,”#E55D87”);<br>        lg.addColorStop(1,”#5FC3E4”);<br>        ctx.fillStyle = lg;<br>        ctx.fillRect(0,0,200,200);</p>
<p><strong>Point</strong></p>
<ul>
<li>线性渐变仅仅是相当于设置填充色，在定义完填充色之后，我们还需要将填充设置为该线性渐变<code>(ctx.fillStyle = gl)</code></li>
<li>由于线性渐变仅仅是设置填充色，所以具体的背景容器还需要我们自己设置，比如设置一个矩形作为容器<code>ctx.fillRect(0,0,200,200)</code></li>
<li>由于渐变背景的坐标是相对于画布，而图形的坐标也是相对于画布，所以在定义背景时，需要注意与图形的坐标搭配以达到需要的效果</li>
</ul>
<h1 id="径向渐变"><a href="#径向渐变" class="headerlink" title="径向渐变"></a>径向渐变</h1><p><img src="\images\Canvas基础\径向渐变.png" alt="径向渐变"></p>
<pre><code>let rg = ctx.createRadialGradient(xStart,yStart,radiusStart,xEnd,yEnd,radiusEnd)
rg.addCOlorStop(offset,color);
</code></pre><ul>
<li>xSart:发散开始的圆心x坐标</li>
<li>yStart：发散开始的圆心y坐标</li>
<li>radiusStart：发散开始圆的半径</li>
<li>xEnd：发散结束圆心的x坐标</li>
<li>yEnd：发散结束圆心的y坐标</li>
<li>radiusEnd：发散结束圆的半径</li>
<li>offset：设定的颜色结束点的偏移量(0-1)</li>
<li><p>color:绘制颜色</p>
<p>  var g1 = ctx.createRadialGradient(200, 150, 0, 200, 150, 200);<br>   g1.addColorStop(0.1, ‘#F09819’);<br>   g1.addColorStop(1, ‘#EDDE5D’);<br>   ctx.fillStyle = g1;<br>   ctx.beginPath();<br>   ctx.arc(200, 150, 100, 0, Math.PI * 2, true);<br>   ctx.closePath();<br>   ctx.fill();</p>
</li>
</ul>
<h1 id="图形变形"><a href="#图形变形" class="headerlink" title="图形变形"></a>图形变形</h1><h2 id="缩放"><a href="#缩放" class="headerlink" title="缩放"></a>缩放</h2><ul>
<li><p>scale(x,y)</p>
</li>
<li><p>x:x坐标轴按x比例缩放</p>
</li>
<li>y:y坐标轴按y比例缩放</li>
<li>前面参数的是按倍数来衡量的(0.5=&gt;50%,1=&gt;100%,2=&gt;200%)</li>
</ul>
<p>eg:</p>
<pre><code>ctx.strokeStyle = &quot;red&quot;;
ctx.scale(2,2);
ctx.strokeRect(5,5,25,15);
ctx.scale(2,2);
ctx.strokeRect(5,5,25,15);
ctx.scale(2,2);
ctx.strokeRect(5,5,25,15);
</code></pre><p><strong>Point</strong></p>
<ul>
<li>缩放一个图形，先使用<code>ctx.scale(x,y)</code>对画布进行缩放处理，后面再创建要缩放的工具<code>ctx.strokeRect(5,5,25,15);</code>。</li>
<li><p>缩放的原点都是在(0,0)位置。</p>
<h2 id="旋转"><a href="#旋转" class="headerlink" title="旋转"></a>旋转</h2></li>
<li><p>ratate(angle)</p>
</li>
<li><p>angle:旋转的<strong>角度，以弧度计。</strong></p>
</li>
</ul>
<p>eg:</p>
<pre><code>ctx.strokeStyle = &quot;red&quot;;
// ctx.strokeRect(5,5,200,200);
ctx.rotate(20*Math.PI/180);//旋转5°
ctx.strokeRect(5,5,200,300);
</code></pre><p><strong>Point:</strong></p>
<p>默认的旋转中心是在(0,0)位置。下面介绍如何改变旋转中心。</p>
<h2 id="平移"><a href="#平移" class="headerlink" title="平移"></a>平移</h2><ul>
<li><p>translate(x,y)</p>
</li>
<li><p>x:坐标原点向x轴平移x</p>
</li>
<li>y:坐标原点想y轴平移y</li>
</ul>
<p>eg1(以矩形中心为原点旋转)：</p>
<pre><code>ctx.strokeStyle = &quot;red&quot;;
    //以(0,0)为原点绘制一个起点为(200,200)，边长为200的正方形
    ctx.strokeRect(200,200,200,200);
    //移动原点至(300,300)，即上面矩形的中心位置
    ctx.translate(300,300);
    //将画布进行一个45°的旋转，得到一个旋转后的图形
    ctx.rotate(45*Math.PI/180);
    //将原点坐标改为(0,0)
    ctx.translate(-300,-300);
    //绘制出旋转后的矩形
    ctx.strokeRect(200,200,200,200);
</code></pre><p>eg2(以矩形中心为原点缩放图形):</p>
<pre><code>ctx.strokeStyle = &quot;red&quot;;
ctx.strokeRect(200,200,100,100);
ctx.translate(250,250);
ctx.scale(2,2);
ctx.translate(-250,-250);
ctx.strokeRect(200,200,100,100);
</code></pre><p><strong>Point</strong></p>
<p>上面提到的，scale,rotate方法的操作都是对画布而言的，貌似整的canvas的思维都是这样，需要我们有反向思考的能力。</p>
<h1 id="组合图形"><a href="#组合图形" class="headerlink" title="组合图形"></a>组合图形</h1><p><img src="\images\Canvas基础\图像组合.png" alt="径向渐变"></p>
<pre><code>globalCompositeOperation = type
</code></pre><p>后绘制的图形如何与之前的图像叠加渲染，取决与type。下面是type的种类：</p>
<ul>
<li>source-over(默认):在原图形之上绘制(覆盖)。</li>
<li>destination-over:在原图形之下绘制。</li>
<li>source-in:显示原有图形和新图形的交集，新图形在上，所以颜色为新图形颜色</li>
<li>destination-in:显示原图形和新图形的交集，原图形在上，所以颜色为原图形的颜色</li>
<li>source-out:只显示新图形的非交集部分</li>
<li>destination-out:只显示旧图形的非交集部分</li>
<li>source-atop:显示原图形和交集部分，新图形在上，所以交集部分为新图形颜色</li>
<li>destination-atop：显示新图形和交集部分，新图形在上，所以交集部分为新图形颜色</li>
<li>lighter：显示原有图形和新图形，交集部分做颜色叠加</li>
<li>copy:只显示新图形</li>
</ul>
<p>eg:</p>
<pre><code>ctx.globalCompositeOperation = &quot;lighter&quot;;  
ctx.fillStyle = &quot;red&quot;;
ctx.fillRect(50,50,200,200);   
ctx.fillStyle = &quot;blue&quot;;
ctx.fillRect(100,100,200,200);
</code></pre><p><strong>Point</strong></p>
<p>该属性与上面的<code>ctx.translate(x,y)</code>一样，一旦作用，就对下面的元素都起作用，如果要还原，请在此使用该属性还原。</p>
<h1 id="阴影"><a href="#阴影" class="headerlink" title="阴影"></a>阴影</h1><ul>
<li>shadowOffsetX:设置或返回阴影距形状的水平距离(默认值为0)<br>-shadowOffsetY:设置或返回阴影形状的垂直距离(默认值为0)</li>
<li>shadowColor:设置或返回阴影的颜色</li>
<li>shadowBlur:设置或返回阴影的模糊级别(值越大越模糊)</li>
</ul>
<p>eg:<br>    ctx.shadowOffsetX=20;<br>    ctx.shadowColor=”blue”;<br>    ctx.shadowBlur = 50;<br>    ctx.fillStyle = “red”;<br>    ctx.fillRect(100,100,200,200);</p>
<pre><code>ctx.shadowBlur = 0;
ctx.shadowOffsetX = 0;
ctx.fillStyle = &quot;yellow&quot;;
ctx.fillRect(400,400,100,100);
</code></pre><p><strong>Point</strong></p>
<p>相同的是，阴影属性也是对一下的所有图形都生效。要取消阴影效果，必须重置:</p>
<pre><code>ctx.shadowBlur = 0;
ctx.shadowOffsetX = 0;
</code></pre><h1 id="图像操作"><a href="#图像操作" class="headerlink" title="图像操作"></a>图像操作</h1><ul>
<li>drawImage(img,x,y):在画布上定位图像</li>
<li>drawImage(img,x,y,width,height):在画布上定位图像，并规定图像的宽度和高度</li>
<li>drawImage(img,sx,sy,swidth,sheight,x,y,width,height)<ul>
<li>img:规定要使用的图像，画布或视频</li>
<li>sx(可选):开始剪切的x坐标位置</li>
<li>sy(可选):开始剪切的y坐标位置</li>
<li>swidth(可选):被剪切的图像的宽度</li>
<li>sheight(可选):被剪切的图像的高度</li>
<li>x:在画布上放置img的x坐标位置</li>
<li>y:在画布上放置img的y坐标位置</li>
<li>width(可选):要使用的图像的宽度。(拉伸或压缩)</li>
<li>height(可选)：要使用的图像的高度。(拉伸或压缩)</li>
</ul>
</li>
</ul>
<p>eg:</p>
<pre><code>let img = new Image();
img.src = &quot;expi.jpg&quot;;
img.onload = function(){
    ctx.drawImage(img,100,100,200,200,200,200,200,200);
}
</code></pre><p><strong>Point</strong></p>
<ol>
<li>img因该是一个img对象，<code>img = new Image()</code>或者是一个Image的DOM标签<code>document.getElementById(&quot;img&quot;)</code>(实际也是一个Image对象，因为在HTML中，每创建一个img标签，就会自动创建一个Image对象。)</li>
<li><p>在使用该标签时，应当使用，Image对象的回调函数onload,否则不能渲染成功，其原因是:</p>
<pre><code>let img = new Image();
img.src = &quot;expi.jpg&quot;;
</code></pre><p>这个过程中，对img.src赋值的时候，可能还没有赋值完成，就进行了<code>ctx.drawImage</code>语句，由于还没赋值完成，此使img.src还是空，所以无法渲染出来。</p>
</li>
</ol>
<h2 id="图像平铺"><a href="#图像平铺" class="headerlink" title="图像平铺"></a>图像平铺</h2><ul>
<li>createPattern(image,type)</li>
</ul>
<p>type:</p>
<ul>
<li>no-repeat:不平铺</li>
<li>repeawt-x:按x轴方向平铺</li>
<li>repeat-y:按y轴方向平铺</li>
<li>repeat：全方向平铺</li>
</ul>
<p>eg:<br>        let img = new Image;<br>        img.src = “beauty.png”;<br>        img.onload = function(){<br>        let pattern = ctx.createPattern(img,”repeat-x”);<br>        ctx.fillStyle = pattern;<br>        ctx.fillRect(10,10,500,500);<br>        }</p>
<p><strong>Point</strong></p>
<ul>
<li>相同的是，必须要配合Image的oload回调函数来使用，道理同上。</li>
</ul>
<h2 id="图像剪切"><a href="#图像剪切" class="headerlink" title="图像剪切"></a>图像剪切</h2><ul>
<li>clip()</li>
</ul>
<p>该函数的使用方法：</p>
<ol>
<li>创建剪切区域:ctx.rect(x,y,width,heigth)</li>
<li>设置剪切部分的填充色:ctx.fillStyle = “pink”</li>
<li>进行填充:ctx.fill();</li>
<li>进行剪切:ctx.clip();</li>
</ol>
<p>eg:</p>
<pre><code>ctx.fillStyle = &quot;yellow&quot;;
ctx.fillRect(0,0,300,300);

ctx.rect(100,100,500,500);
ctx.fillStyle = &quot;pink&quot;;
ctx.fill();
ctx.clip();

ctx.fillStyle = &quot;blue&quot;;
ctx.fillRect(0,0,200,200); 
</code></pre><p><strong>Point</strong></p>
<p>-一旦剪切了某个区域，则之后的所有绘图都会被限制在被剪切区域内进行（不能访问画布上的其他区域）。我们也可以在使用clip()方法之前通过使用save()方法将之前的画布保存下来,并在任意时间使用restored()方法。</p>
<h1 id="绘制文字"><a href="#绘制文字" class="headerlink" title="绘制文字"></a>绘制文字</h1><ul>
<li>fillText(text,x,y):绘制实心文字<ul>
<li>x:文字的中心点x坐标</li>
<li>y：文字的中心点y坐标</li>
</ul>
</li>
<li>strokeText():绘制文字描边(空心文字)</li>
<li>textAlign：设置或返回文字内容的当前对齐方式(注意：其都是相对于该文字对象的中心)，其值有：<ul>
<li>start:默认。文本在指定的位置开始。</li>
<li>end:文本在指定的位置结束。</li>
<li>left:文本左对齐。</li>
<li>center:文本的中心被放置在指定的位置。</li>
<li>right:文本右对齐。</li>
</ul>
</li>
<li>textBaseline：设置会返回在绘制文本时使用的当前文字基线,其值有：<ul>
<li>Bottom：文本基线是 em 方框的底端。</li>
<li>Top：文本基线是 em 方框的顶端。</li>
<li>Middle：文本基线是 em 方框的正中。</li>
<li>Alphabetic：默认。文本基线是普通的字母基线。</li>
<li>hanging：文本基线是悬挂基线。</li>
</ul>
</li>
<li>font:设置或返回文本内容的当前文字属性</li>
</ul>
<p>eg:</p>
<pre><code>ctx.font = &quot;40px Arial&quot;;
ctx.textAlign = &quot;center&quot;;
ctx.fillText(&quot;Hello World&quot;,200,200);
ctx.strokeText(&quot;Hello World&quot;,200,300);
console.log(ctx.textBaseline);
</code></pre><p><img src="\images\Canvas基础\textAlign.png" alt="textAlign"><br><img src="\images\Canvas基础\textBaseline.gif" alt="textBaseline"></p>

      
    </div>
    <footer class="article-footer">
      
        <div id="donation_div"></div>

<script src="/js/vdonate.js"></script>
<script>
var a = new Donate({
  title: '如果觉得我的文章对您有用，请随意打赏。您的支持将鼓励我继续创作!', // 可选参数，打赏标题
  btnText: 'Donate', // 可选参数，打赏按钮文字
  el: document.getElementById('donation_div'),
  wechatImage: 'http://39.106.203.62:7777/mm_facetoface_collect_qrcode_1532532148519.png',
  alipayImage: 'http://39.106.203.62:7777/1532532158487.jpg'
});
</script>
      
      
      <div>
        <ul class="post-copyright">
          <li class="post-copyright-author">
          <strong>Post author:  </strong>Michael Wang</a>
          </li>
          <li class="post-copyright-link">
          <strong>Post link:  </strong>
          <a href="/2019/03/10/canvas基础/" target="_blank" title="canvas基础">http://yoursite.com/2019/03/10/canvas基础/</a>
          </li>
          <li class="post-copyright-license">
            <strong>Copyright Notice:   </strong>
            All articles in this blog are licensed under <a rel="license" href="https://creativecommons.org/licenses/by-nc-nd/4.0/" target="_blank" title="Attribution-NonCommercial-NoDerivatives 4.0 International (CC BY-NC-ND 4.0)">CC BY-NC-ND 4.0</a>
            unless stating additionally.
          </li>
         
        </ul>
<div>

      
      
        
	<div id="comment">
		<!-- 来必力City版安装代码 -->
		<div id="lv-container" data-id="city" data-uid="MTAyMC8yOTQ4MS82MDQ5">
		<script type="text/javascript">
		   (function(d, s) {
		       var j, e = d.getElementsByTagName(s)[0];

		       if (typeof LivereTower === 'function') { return; }

		       j = d.createElement(s);
		       j.src = 'https://cdn-city.livere.com/js/embed.dist.js';
		       j.async = true;

		       e.parentNode.insertBefore(j, e);
		   })(document, 'script');
		</script>
		<noscript>为正常使用来必力评论功能请激活JavaScript</noscript>
		</div>
		<!-- City版安装代码已完成 -->
	</div>



      
      

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2019/03/12/Image对象的complete与onload()事件(以及Canvas的drawImage()函数)/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          Image对象的complete与onload()事件(以及Canvas的drawImage()函数)
        
      </div>
    </a>
  
  
    <a href="/2019/03/03/JavaScript中的.与[]的区别/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">JavaScript中的.与[]的区别</div>
    </a>
  
</nav>

  
</article>

<!-- Table of Contents -->

  <aside id="toc-sidebar">
    <div id="toc" class="toc-article">
    <strong class="toc-title">Contents</strong>
    
        <ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#创建canvas画布"><span class="nav-number">1.</span> <span class="nav-text">创建canvas画布</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Canvas绘制图像"><span class="nav-number">2.</span> <span class="nav-text">Canvas绘制图像</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#绘制矩形"><span class="nav-number">3.</span> <span class="nav-text">绘制矩形</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#绘制基本矩形"><span class="nav-number">3.1.</span> <span class="nav-text">绘制基本矩形</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#改变颜色"><span class="nav-number">3.2.</span> <span class="nav-text">改变颜色</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#擦除矩形区域"><span class="nav-number">3.3.</span> <span class="nav-text">擦除矩形区域</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#绘制圆形"><span class="nav-number">4.</span> <span class="nav-text">绘制圆形</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#绘制基本圆"><span class="nav-number">4.1.</span> <span class="nav-text">绘制基本圆</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#实心圆"><span class="nav-number">4.1.1.</span> <span class="nav-text">实心圆</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#空心圆"><span class="nav-number">4.1.2.</span> <span class="nav-text">空心圆</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#非完整圆"><span class="nav-number">4.1.3.</span> <span class="nav-text">非完整圆</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#绘制线段"><span class="nav-number">4.2.</span> <span class="nav-text">绘制线段</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#线性渐变"><span class="nav-number">5.</span> <span class="nav-text">线性渐变</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#径向渐变"><span class="nav-number">6.</span> <span class="nav-text">径向渐变</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#图形变形"><span class="nav-number">7.</span> <span class="nav-text">图形变形</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#缩放"><span class="nav-number">7.1.</span> <span class="nav-text">缩放</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#旋转"><span class="nav-number">7.2.</span> <span class="nav-text">旋转</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#平移"><span class="nav-number">7.3.</span> <span class="nav-text">平移</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#组合图形"><span class="nav-number">8.</span> <span class="nav-text">组合图形</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#阴影"><span class="nav-number">9.</span> <span class="nav-text">阴影</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#图像操作"><span class="nav-number">10.</span> <span class="nav-text">图像操作</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#图像平铺"><span class="nav-number">10.1.</span> <span class="nav-text">图像平铺</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#图像剪切"><span class="nav-number">10.2.</span> <span class="nav-text">图像剪切</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#绘制文字"><span class="nav-number">11.</span> <span class="nav-text">绘制文字</span></a></li></ol>
    
    </div>
  </aside>

</section>
        
      </div>
      
      <footer id="footer">
  

  <div class="container">
      	<div class="row">
	      <p> Powered by <a href="http://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/iTimeTraveler/hexo-theme-hiker" target="_blank">Hexo-theme-hiker</a> </p>
	      <p id="copyRightEn">Copyright &copy; 2013 - 2021 My Wonderland All Rights Reserved.</p>
	      
	      
    		<p class="busuanzi_uv">
				UV : <span id="busuanzi_value_site_uv"></span> |  
				PV : <span id="busuanzi_value_site_pv"></span>
		    </p>
  		   
		</div>

		
  </div>
</footer>


<!-- min height -->

<script>
    var wrapdiv = document.getElementById("wrap");
    var contentdiv = document.getElementById("content");
    var allheader = document.getElementById("allheader");

    wrapdiv.style.minHeight = document.body.offsetHeight + "px";
    if (allheader != null) {
      contentdiv.style.minHeight = document.body.offsetHeight - allheader.offsetHeight - document.getElementById("footer").offsetHeight + "px";
    } else {
      contentdiv.style.minHeight = document.body.offsetHeight - document.getElementById("footer").offsetHeight + "px";
    }
</script>
    </div>
    <!-- <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
    <a href="/categories" class="mobile-nav-link">Categories</a>
  
    <a href="/tags" class="mobile-nav-link">Tags</a>
  
    <a href="/about" class="mobile-nav-link">About</a>
  
</nav> -->
    

<!-- mathjax config similar to math.stackexchange -->

<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      processEscapes: true
    }
  });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
      }
    });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for(i=0; i < all.length; i += 1) {
            all[i].SourceElement().parentNode.className += ' has-jax';
        }
    });
</script>

<script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/scripts.js"></script>




  <script src="/js/dialog.js"></script>









	<script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js">
	</script>






  </div>

  <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" style="display: none;">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h2 class="modal-title" id="myModalLabel">设置</h2>
      </div>
      <hr style="margin-top:0px; margin-bottom:0px; width:80%; border-top: 3px solid #000;">
      <hr style="margin-top:2px; margin-bottom:0px; width:80%; border-top: 1px solid #000;">


      <div class="modal-body">
          <div style="margin:6px;">
            <a data-toggle="collapse" data-parent="#accordion" href="#collapseOne" onclick="javascript:setFontSize();" aria-expanded="true" aria-controls="collapseOne">
              正文字号大小
            </a>
          </div>
          <div id="collapseOne" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingOne">
          <div class="panel-body">
            您已调整页面字体大小
          </div>
        </div>
      


          <div style="margin:6px;">
            <a data-toggle="collapse" data-parent="#accordion" href="#collapseTwo" onclick="javascript:setBackground();" aria-expanded="true" aria-controls="collapseTwo">
              夜间护眼模式
            </a>
        </div>
          <div id="collapseTwo" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingTwo">
          <div class="panel-body">
            夜间模式已经开启，再次单击按钮即可关闭 
          </div>
        </div>

        <div>
            <a data-toggle="collapse" data-parent="#accordion" href="#collapseThree" aria-expanded="true" aria-controls="collapseThree">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;关 于&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a>
        </div>
         <div id="collapseThree" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingThree">
          <div class="panel-body">
            My Wonderland
          </div>
          <div class="panel-body">
            Copyright © 2021 Michael Wang All Rights Reserved.
          </div>
        </div>
      </div>


      <hr style="margin-top:0px; margin-bottom:0px; width:80%; border-top: 1px solid #000;">
      <hr style="margin-top:2px; margin-bottom:0px; width:80%; border-top: 3px solid #000;">
      <div class="modal-footer">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">×</span></button>
      </div>
    </div>
  </div>
</div>
  
  <a id="rocket" href="#top" class=""></a>
  <script type="text/javascript" src="/js/totop.js?v=1.0.0" async=""></script>
  
    <a id="menu-switch"><i class="fa fa-bars fa-lg"></i></a>
  
</body>
</html>