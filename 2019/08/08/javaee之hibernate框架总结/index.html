<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>javaee之hibernate框架总结 | My Wonderland</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  
  <meta name="keywords" content="JavaEESSHhibernate" />
  
  
  
  
  <meta name="description" content="前言Hibernate目前使用的还是比较多，虽然不及mybatis。 Hibernate概述Hibernate工作在javaEE三层结构中的dao层，对数据库进行crud操作，其核心思想是orm（object relational mapping，对象关系映射），并且Hibernate支持多种查询方式，包括HQL，QBC,SQL三种方式。  orm 让实体类和数据库表进行一一对应关系 让实体类首先">
<meta property="og:type" content="article">
<meta property="og:title" content="javaee之hibernate框架总结">
<meta property="og:url" content="http://yoursite.com/2019/08/08/javaee%E4%B9%8Bhibernate%E6%A1%86%E6%9E%B6%E6%80%BB%E7%BB%93/index.html">
<meta property="og:site_name" content="My Wonderland">
<meta property="og:description" content="前言Hibernate目前使用的还是比较多，虽然不及mybatis。 Hibernate概述Hibernate工作在javaEE三层结构中的dao层，对数据库进行crud操作，其核心思想是orm（object relational mapping，对象关系映射），并且Hibernate支持多种查询方式，包括HQL，QBC,SQL三种方式。  orm 让实体类和数据库表进行一一对应关系 让实体类首先">
<meta property="og:locale">
<meta property="article:published_time" content="2019-08-08T10:09:11.000Z">
<meta property="article:modified_time" content="2021-03-08T02:55:58.693Z">
<meta property="article:author" content="Michael Wang">
<meta property="article:tag" content="JavaEE">
<meta property="article:tag" content="SSH">
<meta property="article:tag" content="hibernate">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="My Wonderland" type="application/atom+xml">
  

  

  <link rel="icon" href="/css/images/mylogo.jpg">
  <link rel="apple-touch-icon" href="/css/images/mylogo.jpg">
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link href="https://fonts.googleapis.com/css?family=Open+Sans|Montserrat:700" rel="stylesheet" type="text/css">
  <link href="https://fonts.googleapis.com/css?family=Roboto:400,300,300italic,400italic" rel="stylesheet" type="text/css">
  <link href="//cdn.bootcss.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet">
  <style type="text/css">
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/9749f0/00000000000000000001008f/27/l?subset_id=2&fvd=n5) format("woff2");font-weight:500;font-style:normal;}
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/90cf9f/000000000000000000010091/27/l?subset_id=2&fvd=n7) format("woff2");font-weight:500;font-style:normal;}
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/8a5494/000000000000000000013365/27/l?subset_id=2&fvd=n4) format("woff2");font-weight:lighter;font-style:normal;}
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/d337d8/000000000000000000010095/27/l?subset_id=2&fvd=i4) format("woff2");font-weight:400;font-style:italic;}</style>
  
<link rel="stylesheet" href="/css/style.css">


  
<script src="/js/jquery-3.1.1.min.js"></script>

  
<script src="/js/bootstrap.js"></script>


  <!-- Bootstrap core CSS -->
  <link rel="stylesheet" href="/css/bootstrap.css" >

  
    
<link rel="stylesheet" href="/css/dialog.css">

  

  

  
    <link rel="stylesheet" href="/css/header-post.css" >
  

  
  
  
    <link rel="stylesheet" href="/css/vdonate.css" >
  

<meta name="generator" content="Hexo 7.3.0"></head>



  <body data-spy="scroll" data-target="#toc" data-offset="50">


  
  <div id="container">
    <div id="wrap">
      
        <header>

    <div id="allheader" class="navbar navbar-default navbar-static-top" role="navigation">
        <div class="navbar-inner">
          
          <div class="container"> 
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
              <span class="sr-only">Toggle navigation</span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
            </button>

            
              <a class="brand" style="
                 margin-top: 0px;"  
                href="#" data-toggle="modal" data-target="#myModal" >
                  <img width="124px" height="124px" alt="Hike News" src="/css/images/mylogo.jpg">
              </a>
            
            
            <div class="navbar-collapse collapse">
              <ul class="hnav navbar-nav">
                
                  <li> <a class="main-nav-link" href="/">Home</a> </li>
                
                  <li> <a class="main-nav-link" href="/archives">Archives</a> </li>
                
                  <li> <a class="main-nav-link" href="/categories">Categories</a> </li>
                
                  <li> <a class="main-nav-link" href="/tags">Tags</a> </li>
                
                  <li> <a class="main-nav-link" href="/about">About</a> </li>
                
                  <li><div id="search-form-wrap">

    <form class="search-form">
        <input type="text" class="ins-search-input search-form-input" placeholder="" />
        <button type="submit" class="search-form-submit"></button>
    </form>
    <div class="ins-search">
    <div class="ins-search-mask"></div>
    <div class="ins-search-container">
        <div class="ins-input-wrapper">
            <input type="text" class="ins-search-input" placeholder="Type something..." />
            <span class="ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
(function (window) {
    var INSIGHT_CONFIG = {
        TRANSLATION: {
            POSTS: 'Posts',
            PAGES: 'Pages',
            CATEGORIES: 'Categories',
            TAGS: 'Tags',
            UNTITLED: '(Untitled)',
        },
        ROOT_URL: '/',
        CONTENT_URL: '/content.json',
    };
    window.INSIGHT_CONFIG = INSIGHT_CONFIG;
})(window);
</script>

<script src="/js/insight.js"></script>


</div></li>
            </div>
          </div>
                
      </div>
    </div>

</header>



      
            
      <div id="content" class="outer">
        
          <section id="main" style="float:none;"><article id="post-javaee之hibernate框架总结" style="width: 75%; float:left;" class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" class="article-title" itemprop="name">
      javaee之hibernate框架总结
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	<a href="/2019/08/08/javaee%E4%B9%8Bhibernate%E6%A1%86%E6%9E%B6%E6%80%BB%E7%BB%93/" class="article-date">
	  <time datetime="2019-08-08T10:09:11.000Z" itemprop="datePublished">2019-08-08</time>
	</a>

      
    <a class="article-category-link" href="/categories/JavaEE/">JavaEE</a>

      
	<a class="article-views">
	<span id="busuanzi_container_page_pv">
		PV:<span id="busuanzi_value_page_pv"></span>
	</span>
	</a>

    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>Hibernate目前使用的还是比较多，虽然不及mybatis。</p>
<h1 id="Hibernate"><a href="#Hibernate" class="headerlink" title="Hibernate"></a>Hibernate</h1><h2 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h2><p>Hibernate工作在javaEE三层结构中的dao层，对数据库进行crud操作，其核心思想是orm（object relational mapping，对象关系映射），并且Hibernate支持多种查询方式，包括HQL，QBC,SQL三种方式。</p>
<ul>
<li>orm<ul>
<li>让实体类和数据库表进行一一对应关系</li>
<li>让实体类首先和数据库表对应</li>
<li>让实体类属性 和 表里面字段对应</li>
<li>不需要直接操作数据库表，而操作表对应实体类对象</li>
</ul>
</li>
</ul>
<a id="more"></a>
<h2 id="配置文件"><a href="#配置文件" class="headerlink" title="配置文件"></a>配置文件</h2><p>Hibernate的核心配置文件有如下要求：</p>
<ul>
<li>必须在src下</li>
<li>必须为hibernate.cfg.xml</li>
</ul>
<h3 id="配置核心文件"><a href="#配置核心文件" class="headerlink" title="配置核心文件"></a>配置核心文件</h3><ol>
<li><p>引入约束</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE hibernate-configuration PUBLIC&quot;-&#x2F;&#x2F;Hibernate&#x2F;Hibernate Configuration DTD 3.0&#x2F;&#x2F;EN&quot;</span><br><span class="line">&quot;http:&#x2F;&#x2F;www.hibernate.org&#x2F;dtd&#x2F;hibernate-configuration-3.0.dtd&quot;&gt;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<ol start="2">
<li><p>配置信息</p>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">&lt;hibernate-configuration&gt;</span><br><span class="line">	&lt;session-factory&gt;</span><br><span class="line">		&lt;!-- 第一部分： 配置数据库信息 必须的 --&gt;</span><br><span class="line">		&lt;property name&#x3D;&quot;hibernate.connection.driver_class&quot;&gt;com.mysql.jdbc.Driver&lt;&#x2F;property&gt;</span><br><span class="line">		&lt;property name&#x3D;&quot;hibernate.connection.url&quot;&gt;jdbc:mysql:&#x2F;&#x2F;&#x2F;hibernate_day01&lt;&#x2F;property&gt;</span><br><span class="line">		&lt;property name&#x3D;&quot;hibernate.connection.username&quot;&gt;root&lt;&#x2F;property&gt;</span><br><span class="line">		&lt;property name&#x3D;&quot;hibernate.connection.password&quot;&gt;root&lt;&#x2F;property&gt;</span><br><span class="line">&lt;!-- 第二部分： 配置hibernate信息  可选的--&gt;</span><br><span class="line">	&lt;!-- 输出底层sql语句 --&gt;</span><br><span class="line">	&lt;property name&#x3D;&quot;hibernate.show_sql&quot;&gt;true&lt;&#x2F;property&gt;</span><br><span class="line">	&lt;!-- 输出底层sql语句格式 --&gt;</span><br><span class="line">	&lt;property name&#x3D;&quot;hibernate.format_sql&quot;&gt;true&lt;&#x2F;property&gt;</span><br><span class="line">	&lt;!-- hibernate帮创建表，需要配置之后 </span><br><span class="line">		update: 如果已经有表，更新，如果没有，创建</span><br><span class="line">	--&gt;</span><br><span class="line">	&lt;property name&#x3D;&quot;hibernate.hbm2ddl.auto&quot;&gt;update&lt;&#x2F;property&gt;</span><br><span class="line">	&lt;!-- 配置数据库方言</span><br><span class="line">		在mysql里面实现分页 关键字 limit，只能使用mysql里面</span><br><span class="line">		在oracle数据库，实现分页rownum</span><br><span class="line">		让hibernate框架识别不同数据库的自己特有的语句</span><br><span class="line">	 --&gt;</span><br><span class="line">	&lt;property name&#x3D;&quot;hibernate.dialect&quot;&gt;org.hibernate.dialect.MySQLDialect&lt;&#x2F;property&gt;</span><br><span class="line">	</span><br><span class="line">	&lt;!-- 第三部分： 把映射文件放到核心配置文件中 必须的--&gt;</span><br><span class="line">	&lt;mapping resource&#x3D;&quot;cn&#x2F;itcast&#x2F;entity&#x2F;User.hbm.xml&quot;&#x2F;&gt;</span><br><span class="line">&lt;&#x2F;session-factory&gt;</span><br><span class="line">&lt;&#x2F;hibernate-configuration&gt;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>值得注意的是：</p>
<ol>
<li>配置数据库信息部分与jdbc部分的配置信息一致</li>
<li><code>hibernate.show_sql</code>： 在编译时控制台输出生成的SQL语句</li>
<li><code>hibernate.format_sql</code> : 在上面的属性开启的前提之下输出格式化之后的SQL语句</li>
<li><code>hibernate.hbm2ddl.auto</code> : 配置数据库方言<br>在mysql里面实现分页 关键字 limit，只能使用mysql里面<br>在oracle数据库，实现分页rownum<br>让hibernate框架识别不同数据库的自己特有的语句</li>
</ol>
<h3 id="配置映射文件"><a href="#配置映射文件" class="headerlink" title="配置映射文件"></a>配置映射文件</h3><p>映射文件是一个表与实体的配置映射</p>
<ul>
<li>命名没有确定规则</li>
<li>位置也没有确定位置</li>
</ul>
<ol>
<li><p>引入约束</p>
<p> &lt;!DOCTYPE hibernate-configuration PUBLIC<br> “-//Hibernate/Hibernate Mapping DTD 3.0//EN”<br> “<a href="http://www.hibernate.org/dtd/hibernate-mapping-3.0.dtd&quot;&gt;" target="_blank" rel="noopener">http://www.hibernate.org/dtd/hibernate-mapping-3.0.dtd&quot;&gt;</a></p>
</li>
<li><p>配置映射关系</p>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;hibernate-mapping&gt;</span><br><span class="line">	&lt;class name&#x3D;&quot;priv.mw.dao&quot; table&#x3D;&quot;t_user&quot;&gt;</span><br><span class="line">		&lt;id name&#x3D;&quot;uid&quot; column&#x3D;&quot;uid&quot;&gt;</span><br><span class="line">			&lt;generator class&#x3D;&quot;native&quot;&gt;&lt;&#x2F;generator&gt;</span><br><span class="line">		&lt;&#x2F;id&gt;</span><br><span class="line">		&lt;property name&#x3D;&quot;username&quot; column&#x3D;&quot;username&quot;&gt;&lt;&#x2F;property&gt;</span><br><span class="line">		&lt;property name&#x3D;&quot;password&quot; column&#x3D;&quot;username&quot;&gt;&lt;&#x2F;property&gt;</span><br><span class="line">		&lt;property name&#x3D;&quot;address&quot; column&#x3D;&quot;address&quot;&gt;&lt;&#x2F;property&gt;</span><br><span class="line">	&lt;&#x2F;class&gt;	</span><br><span class="line">&lt;&#x2F;hibernate-mapping&gt;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>值得注意的是：</p>
<ol>
<li><code>hibernate-mapping</code><ol>
<li>package:填写包名，如果此处填写了完整的包名，则后面class的name属性只需要填写class名字。否则class的name属性则需要填写完整的名字，及包含包名的类名。</li>
</ol>
</li>
<li><p><code>class</code></p>
<ol>
<li>name：填写类名（全路径或名字）</li>
<li>table：数据库中表名。（orm中表与类一一对应）</li>
</ol>
</li>
<li><p><code>id</code>：每一张表必须要有一个唯一的属性。</p>
<ol>
<li>name：类中属性的名字</li>
<li>column：为表中列的名字</li>
</ol>
</li>
<li><code>property</code>:表中的属性<ol>
<li>name:类中的属性名</li>
<li>column：表中的列名</li>
</ol>
</li>
</ol>
<p>值得注意的是：</p>
<ul>
<li>id或property中的column是可选的，如果不填，则默认与name属性相同。</li>
</ul>
<h2 id="实体类的编写规则"><a href="#实体类的编写规则" class="headerlink" title="实体类的编写规则"></a>实体类的编写规则</h2><ol>
<li>实体类中的属性是私有的</li>
<li>私有属性使用公开的set和get方法</li>
<li>要求实体类有属性作为唯一值(一般使用id值)</li>
<li>实体类属性建议不使用基本数据类型，使用基本数据类型对应的包装类，其目的是Integer score = null。可以表示不存在这个值，而基本类不能为null。</li>
</ol>
<h3 id="主键的生成策略"><a href="#主键的生成策略" class="headerlink" title="主键的生成策略"></a>主键的生成策略</h3><ul>
<li>native：自动增长</li>
<li>uuid：uuid算法</li>
</ul>
<h2 id="CRUD"><a href="#CRUD" class="headerlink" title="CRUD"></a>CRUD</h2><h3 id="session方式"><a href="#session方式" class="headerlink" title="session方式"></a>session方式</h3><ol>
<li>加载核心配置文件</li>
<li>加载SessionFactory对象</li>
<li>使用SessionFactory对象创建session对象</li>
<li>开启事务</li>
<li>开始写具体逻辑，crud操作</li>
<li>提交事务</li>
<li>关闭资源</li>
</ol>
<pre><code><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">test</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="comment">//1. 加载hibernate核心配置文件</span></span><br><span class="line">    <span class="comment">//这一步从src中查找hibernate.cfg.xml</span></span><br><span class="line">   Configuration cfg = <span class="keyword">new</span> Configuration();</span><br><span class="line">    cfg.configure();</span><br><span class="line">    <span class="comment">//2. 创建SessionFactory对象</span></span><br><span class="line">    <span class="comment">//同时读取映射文件，创建表格</span></span><br><span class="line">   SessionFactory sessionFactory = cfg.buildSessionFactory();</span><br><span class="line"></span><br><span class="line">    <span class="comment">//3. 创建Session对象</span></span><br><span class="line">   Session session = session.openSession();</span><br><span class="line"></span><br><span class="line">    <span class="comment">//4. 开启事物</span></span><br><span class="line">   Transaction tx = session.beginTransaction();</span><br><span class="line"></span><br><span class="line">    <span class="comment">//5. 写入具体的crud操作</span></span><br><span class="line">    User user = <span class="keyword">new</span> User();</span><br><span class="line">    user.setUsername(<span class="string">"李雷"</span>);</span><br><span class="line">    user.setPassword(<span class="string">'123'</span>);</span><br><span class="line">    user.setAddress(<span class="string">"日本"</span>);</span><br><span class="line">    session.save(user);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//6. 提交事务</span></span><br><span class="line">   tx.commit();</span><br><span class="line"></span><br><span class="line">    <span class="comment">//7. 关闭资源</span></span><br><span class="line">    session.close();</span><br><span class="line">    sessionFactory.close();</span><br></pre></td></tr></table></figure>
}
</code></pre><h4 id="session对象导航查询"><a href="#session对象导航查询" class="headerlink" title="session对象导航查询"></a>session对象导航查询</h4><p>常用的方法：</p>
<ol>
<li>get():通过OID 从数据库中抓取数据，并把数据加载到一个新实例对象上。</li>
<li>save():执行insert语句，当数据库存在这条记录时，会抛出异常。</li>
<li>saveOrUpdate():如果数据库中不存在该数据，则执行insert语句，如果存在则执行更新操作。</li>
<li>update():当数据库中存在这条记录时，Hibernate 总会执行一条SQLUPDATE 语句；当数据库中不存这条记录时，就会抛出异常。</li>
<li>delete():当数据库中存在这条记录时，Hibernate 总会执行一条SQLDELETE 语句；当数据库中不存这条记录时，就会抛出异常。</li>
<li>load():该方法与get相同，但是不会立即去查询数据库，而是等待需要使用该数据时才去查询。比如用ID查询ID，get方法任然回去查询数据库，而load则直接返回使用的ID，不去查询数据库。</li>
</ol>
<h4 id="实体对象三种状态"><a href="#实体对象三种状态" class="headerlink" title="实体对象三种状态"></a>实体对象三种状态</h4><ol>
<li>瞬时状态(Transident):如果对象从未与Session对象关联过，称该对象处于瞬时状态（或临时状态）。</li>
<li>持久状态(Persisdent):如果对象与Session对象关联起来，且该对象对应到数据库记录，则称该对象处于持久化状态。比如通过get获取的对象。</li>
<li>游离状态(Detached)：当持久化对象的Session关闭后，这个对象就会从持久化状态改变成游离状态。</li>
</ol>
<h3 id="HQL方式"><a href="#HQL方式" class="headerlink" title="HQL方式"></a>HQL方式</h3><p>example：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Query query = session.createQuery(<span class="string">"from Customer where name=?"</span>);</span><br><span class="line">query.setParameter(<span class="string">"mw"</span>);</span><br></pre></td></tr></table></figure>
<ol>
<li><p>条件查询：</p>
<p> from Customer c where c.cid=? and c.custName=?</p>
</li>
<li><p>模糊查询</p>
<p> from Customer c where s.custName like ?</p>
</li>
<li><p>排序查询</p>
<p> from Customer order by cid desc</p>
</li>
<li><p>分页查询</p>
<p> Query query = session.createQuery(“from Customer”);</p>
<p> query.setFirstResult(0);<br> query.setMaxReaults(3);</p>
<p> List<Customer> list = query.list();</p>
</li>
<li><p>投影查询:查询不是所有字段值，而是部分字段的值</p>
<p> Query query = session.createQuery(“select cusName from Customer”);</p>
<p> List<Object> list = query.list();</p>
<p> for(Object object : list){</p>
<pre><code>Systom.out.println(Object);
</code></pre><p> }</p>
</li>
<li><p>聚集函数使用</p>
</li>
</ol>
<pre><code>Query query = session.createQuery(&quot;select count(*) from Customer&quot;);

object obj = query.uniqueResult();

Long lobj = (Long)obj;
int count = lobj.intValue();
</code></pre><ol start="7">
<li><p>内连接查询（返回list）：选取两张表的外键相同的数据返回。</p>
<p> Query query = session.createQuery(“from Customer c inner join c.setLinkMan”)</p>
</li>
<li><p>迫切内连接（返回对象）</p>
<pre><code>Query query = session.createQuery(&quot;from Customer c inner join fetch  c.setLinkMan&quot;)
</code></pre></li>
<li><p>左外连接（返回list）：返回左侧表中的所有数据以及右侧与之外键相同的的数据。</p>
<p> Query query = session.createQuery(“from  Customer  c  left  outer  join  c.setLinkMan”);</p>
</li>
<li><p>迫切左外连接（返回对象）</p>
<pre><code>Query query = session.createQuery(&quot;from  Customer  c  left  outer  join fetch c.setLinkMan&quot;);
</code></pre></li>
<li><p>右外连接：返回左右侧表中的所有数据以及左侧与之外键相同的的数据。</p>
<p>Query query = session.createQuery(“from Customer c right outer join s.setLinkMan”); </p>
</li>
</ol>
<h3 id="QBC方式"><a href="#QBC方式" class="headerlink" title="QBC方式"></a>QBC方式</h3><p>调用Criteria的方法实现查询</p>
<ol>
<li><p>查询所有</p>
<p> Criteria criteria = session.createCriteria(Customer.class);</p>
<p> List<Customer> list = criteria.list();</p>
</li>
<li><p>条件查询</p>
<p> Criteria criteria = session.createCriteria(Customer.class);</p>
<p> cretera.add(Restrictions.eq(“cid”,1));<br> critera.add(Restrictions.eq(“custName”,”someone”));</p>
<p> List<Customer> list = criteria.list();</p>
<p> cretiria.add(Restrictions.like(“custName”,”%s%”));</p>
</li>
<li><p>排序查询</p>
<p> Criteria criteria = session.createCriteria(Customer.class);</p>
<p> cretiria.addOrder(Order.desc(“cid”));</p>
</li>
<li><p>分页查询</p>
<p> Criteria criteria = session.createCriteria(Customer.class);</p>
<p> criteria.setFirstResult(0);<br> criteria.setMaxResult(3);</p>
</li>
<li><p>统计查询</p>
<p> Criteria criteria = session.createCriteria(Customer.class);</p>
<p> criteria.setProjection(Projections.rowCount());</p>
<p> Object obj = criteria.uniqueResult();</p>
<p> Long lobj = (Long) obj;</p>
<p> int count = lobj.intValue;</p>
</li>
<li><p>离线查询：不通过session对象来创建查询对象，即可以在dao层session对象关闭后也能执行查询。一般用在多条件查询直接在service层进行离线查询。</p>
<p> DetachedCriteria detachedCriteria = DetachedCriteria.forClass(Customer.class);</p>
<p> Criteria criteria = detachedCriteria.getExecutableCriteria(session);</p>
<p> List<Customer> list = criteria.list();</p>
</li>
</ol>
<h2 id="hibernate一对多操作"><a href="#hibernate一对多操作" class="headerlink" title="hibernate一对多操作"></a>hibernate一对多操作</h2><p>这里的一对多其实就是SQL中一对多的概念，不过我们在学习如何在hibernate中来使用这个概念。</p>
<p>以客户，联系人为例：</p>
<ol>
<li><p>创建两个实体类，客户、联系人</p>
</li>
<li><p>让连个实体之间相互表示，即将对方对象作为一个自己的一个私有属性，并设置set,get方法。</p>
<ol>
<li><p>在客户实体类里面表示多个联系人</p>
<p>private Set<LinkMan> setLinkMan = new HashSet<LinkMan>();</p>
<p>public Set<LinkMan> getSetLinkMan(){<br> return setLinkMan;<br>}</p>
<p>public void getSetLinkMan(Set<LinkMan> setLinkMan){<br> this.setLinkMan = setLinkMan;<br>}</p>
</li>
<li><p>在联系人实体类里面表示所属客户</p>
<p>private Customer customer;</p>
<p>public Customer getCustomer(){<br> return customer;<br>}</p>
<p>public void setCustomer(Customer customer){<br> this.customer = customer;<br>}</p>
</li>
</ol>
</li>
<li><p>配置客户映射关系<br> //在客户映射文件中，表示联系人<br> //使用set标签表示所有联系人<br> //set中name为联系人中的set集合名称<br> //column为外键名称</p>
 <set name="setLinkMan"><br>     //class中写联系人的实体全路径<br>     <key column="clid"></key><br>     <one-to-many class="cn.itcast.entity.LinkMan"><br> </set>
</li>
<li><p>配置联系人映射文件</p>
<p> //name：在联系人实体中的客户属性的名字<br> //class：联系人class的全路径<br> //column：外键名称<br> <many-to-one name="customer" class="cn.itcast.entity.Customer" column="clid"><br> <many-to-one></p>
</li>
<li><p>配置核心配置文件</p>
</li>
</ol>
<p>resource：映射文件的路径名称</p>
<pre><code>&lt;mapping resource=&quot;cn/itcast/entuty/Customer.hbm.xml&quot;&gt;
&lt;mapping resource=&quot;cn/itcast/entuty/LinkMan.hbm.xml&quot;&gt;
</code></pre><h3 id="一对多级联保存"><a href="#一对多级联保存" class="headerlink" title="一对多级联保存"></a>一对多级联保存</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">Customer customer = <span class="keyword">new</span> Customer();</span><br><span class="line">customer.setCustName(<span class="string">"百度"</span>);</span><br><span class="line">customer.setCustLevel(<span class="string">"普通客户"</span>);</span><br><span class="line">customer.setCustSource(<span class="string">"网络"</span>);</span><br><span class="line">customer.setCustPhone(<span class="string">"110"</span>);</span><br><span class="line">customer.setCustMobile(<span class="string">"999"</span>);</span><br><span class="line"></span><br><span class="line">LinkMan linkman = <span class="keyword">new</span> LinkMan();</span><br><span class="line">linkman.setLkm_name(<span class="string">"小宏"</span>);</span><br><span class="line">linkman.setLkm_gender(<span class="string">"男"</span>);</span><br><span class="line">linkman.setLkm_phone(<span class="string">"911"</span>);</span><br><span class="line"><span class="comment">//2 把联系人放到客户里面</span></span><br><span class="line">customer.getSetLinkMan().add(linkman);</span><br><span class="line"><span class="comment">//3 保存客户</span></span><br><span class="line">session.save(customer);</span><br></pre></td></tr></table></figure>
<h3 id="一对多级联删除"><a href="#一对多级联删除" class="headerlink" title="一对多级联删除"></a>一对多级联删除</h3><p>删除某个客户，把客户里面所有的联系人删除</p>
<p>需在set中配置cascade属性：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;set name=<span class="string">"setLinkMan"</span> cascade=<span class="string">"save-update,delete"</span>&gt;</span><br><span class="line"></span><br><span class="line">Customer customer = session.get(CUstomer<span class="class">.<span class="keyword">class</span>,3)</span>;</span><br><span class="line"></span><br><span class="line">session.delete(customer);</span><br></pre></td></tr></table></figure>
<h3 id="一对多级联更新"><a href="#一对多级联更新" class="headerlink" title="一对多级联更新"></a>一对多级联更新</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//根据id查询Lucy联系人，客户百度</span></span><br><span class="line">Customer baidu = session.get(Customer<span class="class">.<span class="keyword">class</span>,1)</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//设置持久态对象</span></span><br><span class="line"></span><br><span class="line">Customer lucy = session.get(LinkMan<span class="class">.<span class="keyword">class</span>,2)</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//把联系人放入客户对象中</span></span><br><span class="line">baidu.getSetLinkMan().add(lucy);</span><br><span class="line"></span><br><span class="line"><span class="comment">//把客户放到联系人中</span></span><br><span class="line">lucy.setCustomer(baidu);</span><br></pre></td></tr></table></figure>
<p>值得注意的是：</p>
<p>在默认转态下，两个对象都会维护这个关系。所以会执行两次SQL语句。为了解决这个问题，可以在set中配置inverse属性，让某一方放弃维护。</p>
<ul>
<li>inverse:<ul>
<li>false不放弃维护</li>
<li>true放弃维护</li>
</ul>
</li>
</ul>
<h2 id="hibernate多对多"><a href="#hibernate多对多" class="headerlink" title="hibernate多对多"></a>hibernate多对多</h2><p>实际上我们在比较少用多对多关系，会将其转化为两个一对多关系。</p>
<p>以用户和角色为例：</p>
<ol>
<li><p>创建实体类，用户和角色</p>
</li>
<li><p>让两个实体类相互表示</p>
<ol>
<li><p>一个用户有多个角色，使用set集合</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">Private Set&lt;Role&gt; setRole = <span class="keyword">new</span> HashSet&lt;Role&gt;();</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> Set&lt;Role&gt; <span class="title">getSetRole</span><span class="params">()</span></span>&#123;</span><br><span class="line">		<span class="keyword">return</span> setRole;</span><br><span class="line">&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setSetRole</span><span class="params">(Set&lt;Role&gt; setRole)</span></span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.setRole = setRole;</span><br><span class="line">&#125;</span><br><span class="line">	</span><br><span class="line"><span class="number">2</span>. 一个角色有多个用户，使用set集合</span><br><span class="line">	</span><br><span class="line"><span class="keyword">private</span> Set&lt;User&gt; setUser = <span class="keyword">new</span> HashSet&lt;User&gt;();</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> Set&lt;User&gt; <span class="title">getSetUser</span><span class="params">()</span></span>&#123;</span><br><span class="line">		<span class="keyword">return</span> setUser;</span><br><span class="line">&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setSetUser</span><span class="params">(Set&lt;User&gt; setUser)</span></span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.setUser =setUser;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ol>
</li>
</ol>
<ol start="3">
<li><p>配置映射关系</p>
<ol>
<li><p>在用户里面表示所有角色，使用set标签</p>
<p><set name="setRole" table="user_role"><br> <key column="userid"></key><br> <many-to-many class="cn.itcast.manytomany.Role" column="roleid"></many-to-many></p>
<set>
</li>
<li><p>在角色中表示所有用户，使用set标签</p>
<set name="setUser" table="user_role"><br> <key column="userid"></key><br> <many-to-many class="cn.idcast.manytomany.User" column="userid"></many-to-many><br></set>
</li>
</ol>
</li>
<li><p>在核心配置文件中引入映射文件</p>
<p> <mapping resource="cn/itcast/manytomany/User.hbm.xml"></p>
 <mapping resource="cn/itcast/manytomany/Role.hbm.xml">

</li>
</ol>
<h3 id="多对多级联保存"><a href="#多对多级联保存" class="headerlink" title="多对多级联保存"></a>多对多级联保存</h3><p>任然需要在set中配置cascade</p>
<pre><code>&lt;set name=&quot;setRole&quot; table=&quot;user_role&quot; cascade=&quot;save-update,delete&quot;&gt;
</code></pre><p>实体类中代码：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">User user1 = <span class="keyword">new</span> User();</span><br><span class="line">user1.setUser_name(<span class="string">"lucy"</span>);</span><br><span class="line">user1.setUser_password(<span class="string">"123"</span>);</span><br><span class="line"></span><br><span class="line">User user2 = <span class="keyword">new</span> User();</span><br><span class="line">user2.setUser_name(<span class="string">"mary"</span>);</span><br><span class="line">user2.setUser_password(<span class="string">"456"</span>);</span><br><span class="line"></span><br><span class="line">Role r1 = <span class="keyword">new</span> Role();</span><br><span class="line">r1.setRole_name(<span class="string">"总经理"</span>);</span><br><span class="line">r1.setRole_memo(<span class="string">"总经理"</span>);</span><br><span class="line"></span><br><span class="line">Role r2 = <span class="keyword">new</span> Role();</span><br><span class="line">r2.setRole_name(<span class="string">"秘书"</span>);</span><br><span class="line">r2.setRole_memo(<span class="string">"秘书"</span>);</span><br><span class="line"></span><br><span class="line">Role r3 = <span class="keyword">new</span> Role();</span><br><span class="line">r3.setRole_name(<span class="string">"保安"</span>);</span><br><span class="line">r3.setRole_memo(<span class="string">"保安"</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//2 建立关系，把角色放到用户里面</span></span><br><span class="line"><span class="comment">// user1 -- r1/r2</span></span><br><span class="line">user1.getSetRole().add(r1);</span><br><span class="line">user1.getSetRole().add(r2);</span><br><span class="line"></span><br><span class="line"><span class="comment">// user2 -- r2/r3</span></span><br><span class="line">user2.getSetRole().add(r2);</span><br><span class="line">user2.getSetRole().add(r3);</span><br><span class="line"></span><br><span class="line"><span class="comment">//3 保存用户</span></span><br><span class="line">session.save(user1);</span><br><span class="line">session.save(user2);</span><br></pre></td></tr></table></figure>
<h3 id="多对多级联删除"><a href="#多对多级联删除" class="headerlink" title="多对多级联删除"></a>多对多级联删除</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;set name=<span class="string">"setRole"</span> table=<span class="string">"user_role"</span> cascade=<span class="string">"save-update,delete"</span>&gt;</span><br><span class="line"></span><br><span class="line">User user = session.get(User<span class="class">.<span class="keyword">class</span>,1)</span>;</span><br><span class="line">session.delete(user);</span><br></pre></td></tr></table></figure>
<h3 id="多对多级联更新"><a href="#多对多级联更新" class="headerlink" title="多对多级联更新"></a>多对多级联更新</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">User lucy = session.get(User<span class="class">.<span class="keyword">class</span>,1)</span>;</span><br><span class="line">Role role = session.get(Role<span class="class">.<span class="keyword">class</span>,1)</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//为用户添加角色</span></span><br><span class="line">lucy.getSetRole().add(role);</span><br><span class="line"></span><br><span class="line"><span class="comment">//把用户角色删除</span></span><br><span class="line">lucy.getSetRole().remove(role);</span><br></pre></td></tr></table></figure>
<h2 id="hibernate缓存"><a href="#hibernate缓存" class="headerlink" title="hibernate缓存"></a>hibernate缓存</h2><p>hibernate为了增加查询效率，建立了缓存机制。即在查询到某个数据后，则将其存储到内存中，下一次查询时直接获取内存中的数据，不用向数据库查询，直接获取，加快查询速度。</p>
<ol>
<li>hibernate的一级缓存默认打开的</li>
<li><p>hibernate的一级缓存使用范围，是session范围，3. hibernate的一级缓存中，存储数据必须 持久态数据</p>
<h2 id="hibernate事务"><a href="#hibernate事务" class="headerlink" title="hibernate事务"></a>hibernate事务</h2><p>与SQL的事务一致，保证一系列工作的全部执行。具有以下特性：</p>
</li>
<li><p>原子性： 确保工作单元中的所有操作都成功完成; 否则，该事务被中止的故障点，操作回滚到操作之前的状态。</p>
</li>
<li>一致性：确保数据库正确后成功提交事务更改状态。</li>
<li>隔离性：事务操作彼此独立和透明。</li>
<li>持久性：可确保提交的事务的结果或仍然存在系统故障的情况下的作用。</li>
</ol>
<p>try {<br>  开启事务<br>  提交事务<br>}catch() {<br>  回滚事务<br>}finally {<br>  关闭<br>}</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testTx</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	SessionFactory sessionFactory = <span class="keyword">null</span>;</span><br><span class="line">	Session session = <span class="keyword">null</span>;</span><br><span class="line">	Transaction tx = <span class="keyword">null</span>;</span><br><span class="line">	<span class="keyword">try</span> &#123;</span><br><span class="line">		sessionFactory = HibernateUtils.getSessionFactory();</span><br><span class="line">		session = sessionFactory.openSession();</span><br><span class="line">		<span class="comment">//开启事务</span></span><br><span class="line">		tx = session.beginTransaction();</span><br><span class="line">		</span><br><span class="line">		<span class="comment">//添加</span></span><br><span class="line">		User user = <span class="keyword">new</span> User();</span><br><span class="line">		user.setUsername(<span class="string">"小马"</span>);</span><br><span class="line">		user.setPassword(<span class="string">"250"</span>);</span><br><span class="line">		user.setAddress(<span class="string">"美国"</span>);</span><br><span class="line">		</span><br><span class="line">		session.save(user);</span><br><span class="line">		</span><br><span class="line">		<span class="keyword">int</span> i = <span class="number">10</span>/<span class="number">0</span>;</span><br><span class="line">		<span class="comment">//提交事务</span></span><br><span class="line">		tx.commit();</span><br><span class="line">	&#125;<span class="keyword">catch</span>(Exception e) &#123;</span><br><span class="line">		e.printStackTrace();</span><br><span class="line">		<span class="comment">//回滚事务</span></span><br><span class="line">		tx.rollback();</span><br><span class="line">	&#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">		<span class="comment">//关闭操作</span></span><br><span class="line">		session.close();</span><br><span class="line">		sessionFactory.close();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>通过<code>session.beginTransaction()</code>获取<code>Transaction</code>对象。</p>
<h1 id="最后"><a href="#最后" class="headerlink" title="最后"></a>最后</h1><p>这个说明只是一个简单的概述，根据黑马程序员2016年版的笔记总结而来，肯定不是全部的，但是这个足够进行简单的操作。</p>

      
    </div>
    <footer class="article-footer">
      
        <div id="donation_div"></div>


<script src="/js/vdonate.js"></script>

<script>
var a = new Donate({
  title: '如果觉得我的文章对您有用，请随意打赏。您的支持将鼓励我继续创作!', // 可选参数，打赏标题
  btnText: 'Donate', // 可选参数，打赏按钮文字
  el: document.getElementById('donation_div'),
  wechatImage: 'http://39.106.203.62:7777/mm_facetoface_collect_qrcode_1532532148519.png',
  alipayImage: 'http://39.106.203.62:7777/1532532158487.jpg'
});
</script>
      
      
      <div>
        <ul class="post-copyright">
          <li class="post-copyright-author">
          <strong>Post author:  </strong>Michael Wang</a>
          </li>
          <li class="post-copyright-link">
          <strong>Post link:  </strong>
          <a href="/2019/08/08/javaee之hibernate框架总结/" target="_blank" title="javaee之hibernate框架总结">http://yoursite.com/2019/08/08/javaee之hibernate框架总结/</a>
          </li>
          <li class="post-copyright-license">
            <strong>Copyright Notice:   </strong>
            All articles in this blog are licensed under <a rel="license" href="https://creativecommons.org/licenses/by-nc-nd/4.0/" target="_blank" title="Attribution-NonCommercial-NoDerivatives 4.0 International (CC BY-NC-ND 4.0)">CC BY-NC-ND 4.0</a>
            unless stating additionally.
          </li>
         
        </ul>
<div>

      
      
        
	<div id="comment">
		<!-- 来必力City版安装代码 -->
		<div id="lv-container" data-id="city" data-uid="MTAyMC8yOTQ4MS82MDQ5">
		<script type="text/javascript">
		   (function(d, s) {
		       var j, e = d.getElementsByTagName(s)[0];

		       if (typeof LivereTower === 'function') { return; }

		       j = d.createElement(s);
		       j.src = 'https://cdn-city.livere.com/js/embed.dist.js';
		       j.async = true;

		       e.parentNode.insertBefore(j, e);
		   })(document, 'script');
		</script>
		<noscript>为正常使用来必力评论功能请激活JavaScript</noscript>
		</div>
		<!-- City版安装代码已完成 -->
	</div>



      
      

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2019/08/09/javaee%E4%B9%8Bspring%E6%A1%86%E6%9E%B6%E6%80%BB%E7%BB%93/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          javaee之spring框架总结
        
      </div>
    </a>
  
  
    <a href="/2019/08/08/javaee%E4%B9%8Bstruts%E6%A1%86%E6%9E%B6%E6%80%BB%E7%BB%93/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">javaee之struts框架总结</div>
    </a>
  
</nav>

  
</article>

<!-- Table of Contents -->

  <aside id="toc-sidebar">
    <div id="toc" class="toc-article">
    <strong class="toc-title">Contents</strong>
    
        <ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%89%8D%E8%A8%80"><span class="nav-number">1.</span> <span class="nav-text">前言</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Hibernate"><span class="nav-number">2.</span> <span class="nav-text">Hibernate</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%A6%82%E8%BF%B0"><span class="nav-number">2.1.</span> <span class="nav-text">概述</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="nav-number">2.2.</span> <span class="nav-text">配置文件</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%85%8D%E7%BD%AE%E6%A0%B8%E5%BF%83%E6%96%87%E4%BB%B6"><span class="nav-number">2.2.1.</span> <span class="nav-text">配置核心文件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%85%8D%E7%BD%AE%E6%98%A0%E5%B0%84%E6%96%87%E4%BB%B6"><span class="nav-number">2.2.2.</span> <span class="nav-text">配置映射文件</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AE%9E%E4%BD%93%E7%B1%BB%E7%9A%84%E7%BC%96%E5%86%99%E8%A7%84%E5%88%99"><span class="nav-number">2.3.</span> <span class="nav-text">实体类的编写规则</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%B8%BB%E9%94%AE%E7%9A%84%E7%94%9F%E6%88%90%E7%AD%96%E7%95%A5"><span class="nav-number">2.3.1.</span> <span class="nav-text">主键的生成策略</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#CRUD"><span class="nav-number">2.4.</span> <span class="nav-text">CRUD</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#session%E6%96%B9%E5%BC%8F"><span class="nav-number">2.4.1.</span> <span class="nav-text">session方式</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#session%E5%AF%B9%E8%B1%A1%E5%AF%BC%E8%88%AA%E6%9F%A5%E8%AF%A2"><span class="nav-number">2.4.1.1.</span> <span class="nav-text">session对象导航查询</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%AE%9E%E4%BD%93%E5%AF%B9%E8%B1%A1%E4%B8%89%E7%A7%8D%E7%8A%B6%E6%80%81"><span class="nav-number">2.4.1.2.</span> <span class="nav-text">实体对象三种状态</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#HQL%E6%96%B9%E5%BC%8F"><span class="nav-number">2.4.2.</span> <span class="nav-text">HQL方式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#QBC%E6%96%B9%E5%BC%8F"><span class="nav-number">2.4.3.</span> <span class="nav-text">QBC方式</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#hibernate%E4%B8%80%E5%AF%B9%E5%A4%9A%E6%93%8D%E4%BD%9C"><span class="nav-number">2.5.</span> <span class="nav-text">hibernate一对多操作</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%B8%80%E5%AF%B9%E5%A4%9A%E7%BA%A7%E8%81%94%E4%BF%9D%E5%AD%98"><span class="nav-number">2.5.1.</span> <span class="nav-text">一对多级联保存</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%B8%80%E5%AF%B9%E5%A4%9A%E7%BA%A7%E8%81%94%E5%88%A0%E9%99%A4"><span class="nav-number">2.5.2.</span> <span class="nav-text">一对多级联删除</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%B8%80%E5%AF%B9%E5%A4%9A%E7%BA%A7%E8%81%94%E6%9B%B4%E6%96%B0"><span class="nav-number">2.5.3.</span> <span class="nav-text">一对多级联更新</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#hibernate%E5%A4%9A%E5%AF%B9%E5%A4%9A"><span class="nav-number">2.6.</span> <span class="nav-text">hibernate多对多</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%A4%9A%E5%AF%B9%E5%A4%9A%E7%BA%A7%E8%81%94%E4%BF%9D%E5%AD%98"><span class="nav-number">2.6.1.</span> <span class="nav-text">多对多级联保存</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%A4%9A%E5%AF%B9%E5%A4%9A%E7%BA%A7%E8%81%94%E5%88%A0%E9%99%A4"><span class="nav-number">2.6.2.</span> <span class="nav-text">多对多级联删除</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%A4%9A%E5%AF%B9%E5%A4%9A%E7%BA%A7%E8%81%94%E6%9B%B4%E6%96%B0"><span class="nav-number">2.6.3.</span> <span class="nav-text">多对多级联更新</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#hibernate%E7%BC%93%E5%AD%98"><span class="nav-number">2.7.</span> <span class="nav-text">hibernate缓存</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#hibernate%E4%BA%8B%E5%8A%A1"><span class="nav-number">2.8.</span> <span class="nav-text">hibernate事务</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%9C%80%E5%90%8E"><span class="nav-number">3.</span> <span class="nav-text">最后</span></a></li></ol>
    
    </div>
  </aside>

</section>
        
      </div>
      
      <footer id="footer">
  

  <div class="container">
      	<div class="row">
	      <p> Powered by <a href="http://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/iTimeTraveler/hexo-theme-hiker" target="_blank">Hexo-theme-hiker</a> </p>
	      <p id="copyRightEn">Copyright &copy; 2019 - 2024 My Wonderland All Rights Reserved.</p>
	      
	      
    		<p class="busuanzi_uv">
				UV : <span id="busuanzi_value_site_uv"></span> |  
				PV : <span id="busuanzi_value_site_pv"></span>
		    </p>
  		   
		</div>

		
  </div>
</footer>


<!-- min height -->

<script>
    var wrapdiv = document.getElementById("wrap");
    var contentdiv = document.getElementById("content");
    var allheader = document.getElementById("allheader");

    wrapdiv.style.minHeight = document.body.offsetHeight + "px";
    if (allheader != null) {
      contentdiv.style.minHeight = document.body.offsetHeight - allheader.offsetHeight - document.getElementById("footer").offsetHeight + "px";
    } else {
      contentdiv.style.minHeight = document.body.offsetHeight - document.getElementById("footer").offsetHeight + "px";
    }
</script>
    </div>
    <!-- <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
    <a href="/categories" class="mobile-nav-link">Categories</a>
  
    <a href="/tags" class="mobile-nav-link">Tags</a>
  
    <a href="/about" class="mobile-nav-link">About</a>
  
</nav> -->
    

<!-- mathjax config similar to math.stackexchange -->

<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      processEscapes: true
    }
  });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
      }
    });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for(i=0; i < all.length; i += 1) {
            all[i].SourceElement().parentNode.className += ' has-jax';
        }
    });
</script>

<script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>


  
<link rel="stylesheet" href="/fancybox/jquery.fancybox.css">

  
<script src="/fancybox/jquery.fancybox.pack.js"></script>




<script src="/js/scripts.js"></script>





  
<script src="/js/dialog.js"></script>










	<script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js">
	</script>






  </div>

  <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" style="display: none;">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h2 class="modal-title" id="myModalLabel">设置</h2>
      </div>
      <hr style="margin-top:0px; margin-bottom:0px; width:80%; border-top: 3px solid #000;">
      <hr style="margin-top:2px; margin-bottom:0px; width:80%; border-top: 1px solid #000;">


      <div class="modal-body">
          <div style="margin:6px;">
            <a data-toggle="collapse" data-parent="#accordion" href="#collapseOne" onclick="javascript:setFontSize();" aria-expanded="true" aria-controls="collapseOne">
              正文字号大小
            </a>
          </div>
          <div id="collapseOne" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingOne">
          <div class="panel-body">
            您已调整页面字体大小
          </div>
        </div>
      


          <div style="margin:6px;">
            <a data-toggle="collapse" data-parent="#accordion" href="#collapseTwo" onclick="javascript:setBackground();" aria-expanded="true" aria-controls="collapseTwo">
              夜间护眼模式
            </a>
        </div>
          <div id="collapseTwo" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingTwo">
          <div class="panel-body">
            夜间模式已经开启，再次单击按钮即可关闭 
          </div>
        </div>

        <div>
            <a data-toggle="collapse" data-parent="#accordion" href="#collapseThree" aria-expanded="true" aria-controls="collapseThree">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;关 于&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a>
        </div>
         <div id="collapseThree" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingThree">
          <div class="panel-body">
            My Wonderland
          </div>
          <div class="panel-body">
            Copyright © 2024 Michael Wang All Rights Reserved.
          </div>
        </div>
      </div>


      <hr style="margin-top:0px; margin-bottom:0px; width:80%; border-top: 1px solid #000;">
      <hr style="margin-top:2px; margin-bottom:0px; width:80%; border-top: 3px solid #000;">
      <div class="modal-footer">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">×</span></button>
      </div>
    </div>
  </div>
</div>
  
  <a id="rocket" href="#top" class=""></a>
  <a id="mwSearch"><div id="search-form-wrap">

    <form class="search-form">
        <input type="text" class="ins-search-input search-form-input" placeholder="" />
        <button type="submit" class="search-form-submit"></button>
    </form>
    <div class="ins-search">
    <div class="ins-search-mask"></div>
    <div class="ins-search-container">
        <div class="ins-input-wrapper">
            <input type="text" class="ins-search-input" placeholder="Type something..." />
            <span class="ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
(function (window) {
    var INSIGHT_CONFIG = {
        TRANSLATION: {
            POSTS: 'Posts',
            PAGES: 'Pages',
            CATEGORIES: 'Categories',
            TAGS: 'Tags',
            UNTITLED: '(Untitled)',
        },
        ROOT_URL: '/',
        CONTENT_URL: '/content.json',
    };
    window.INSIGHT_CONFIG = INSIGHT_CONFIG;
})(window);
</script>

<script src="/js/insight.js"></script>


</div></a>
  <script type="text/javascript" src="/js/totop.js?v=1.0.0" async=""></script>
  
    <a id="menu-switch"><i class="fa fa-bars fa-lg"></i></a>
  
</body>
</html>