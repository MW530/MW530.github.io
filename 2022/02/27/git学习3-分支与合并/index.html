<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>git学习3-分支与合并 | My Wonderland</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  
  <meta name="keywords" content="git分支与合并" />
  
  
  
  
  <meta name="description" content="分支与合并branch123456789101112131415git branch [--color[&#x3D;&lt;when&gt;] | --no-color] [--show-current]	[-v [--abbrev&#x3D;&lt;n&gt; | --no-abbrev]]	[--column[&#x3D;&lt;options&gt;] | --no-column] [--sort&#x3D;&lt;key&gt;">
<meta property="og:type" content="article">
<meta property="og:title" content="git学习3-分支与合并">
<meta property="og:url" content="http://yoursite.com/2022/02/27/git%E5%AD%A6%E4%B9%A03-%E5%88%86%E6%94%AF%E4%B8%8E%E5%90%88%E5%B9%B6/index.html">
<meta property="og:site_name" content="My Wonderland">
<meta property="og:description" content="分支与合并branch123456789101112131415git branch [--color[&#x3D;&lt;when&gt;] | --no-color] [--show-current]	[-v [--abbrev&#x3D;&lt;n&gt; | --no-abbrev]]	[--column[&#x3D;&lt;options&gt;] | --no-column] [--sort&#x3D;&lt;key&gt;">
<meta property="og:locale">
<meta property="article:published_time" content="2022-02-27T12:39:21.000Z">
<meta property="article:modified_time" content="2022-02-27T12:43:27.505Z">
<meta property="article:author" content="Michael Wang">
<meta property="article:tag" content="git">
<meta property="article:tag" content="分支与合并">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="My Wonderland" type="application/atom+xml">
  

  

  <link rel="icon" href="/css/images/mylogo.jpg">
  <link rel="apple-touch-icon" href="/css/images/mylogo.jpg">
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link href="https://fonts.googleapis.com/css?family=Open+Sans|Montserrat:700" rel="stylesheet" type="text/css">
  <link href="https://fonts.googleapis.com/css?family=Roboto:400,300,300italic,400italic" rel="stylesheet" type="text/css">
  <link href="//cdn.bootcss.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet">
  <style type="text/css">
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/9749f0/00000000000000000001008f/27/l?subset_id=2&fvd=n5) format("woff2");font-weight:500;font-style:normal;}
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/90cf9f/000000000000000000010091/27/l?subset_id=2&fvd=n7) format("woff2");font-weight:500;font-style:normal;}
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/8a5494/000000000000000000013365/27/l?subset_id=2&fvd=n4) format("woff2");font-weight:lighter;font-style:normal;}
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/d337d8/000000000000000000010095/27/l?subset_id=2&fvd=i4) format("woff2");font-weight:400;font-style:italic;}</style>
  
<link rel="stylesheet" href="/css/style.css">


  
<script src="/js/jquery-3.1.1.min.js"></script>

  
<script src="/js/bootstrap.js"></script>


  <!-- Bootstrap core CSS -->
  <link rel="stylesheet" href="/css/bootstrap.css" >

  
    
<link rel="stylesheet" href="/css/dialog.css">

  

  

  
    <link rel="stylesheet" href="/css/header-post.css" >
  

  
  
  
    <link rel="stylesheet" href="/css/vdonate.css" >
  

<meta name="generator" content="Hexo 7.3.0"></head>



  <body data-spy="scroll" data-target="#toc" data-offset="50">


  
  <div id="container">
    <div id="wrap">
      
        <header>

    <div id="allheader" class="navbar navbar-default navbar-static-top" role="navigation">
        <div class="navbar-inner">
          
          <div class="container"> 
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
              <span class="sr-only">Toggle navigation</span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
            </button>

            
              <a class="brand" style="
                 margin-top: 0px;"  
                href="#" data-toggle="modal" data-target="#myModal" >
                  <img width="124px" height="124px" alt="Hike News" src="/css/images/mylogo.jpg">
              </a>
            
            
            <div class="navbar-collapse collapse">
              <ul class="hnav navbar-nav">
                
                  <li> <a class="main-nav-link" href="/">Home</a> </li>
                
                  <li> <a class="main-nav-link" href="/archives">Archives</a> </li>
                
                  <li> <a class="main-nav-link" href="/categories">Categories</a> </li>
                
                  <li> <a class="main-nav-link" href="/tags">Tags</a> </li>
                
                  <li> <a class="main-nav-link" href="/about">About</a> </li>
                
                  <li><div id="search-form-wrap">

    <form class="search-form">
        <input type="text" class="ins-search-input search-form-input" placeholder="" />
        <button type="submit" class="search-form-submit"></button>
    </form>
    <div class="ins-search">
    <div class="ins-search-mask"></div>
    <div class="ins-search-container">
        <div class="ins-input-wrapper">
            <input type="text" class="ins-search-input" placeholder="Type something..." />
            <span class="ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
(function (window) {
    var INSIGHT_CONFIG = {
        TRANSLATION: {
            POSTS: 'Posts',
            PAGES: 'Pages',
            CATEGORIES: 'Categories',
            TAGS: 'Tags',
            UNTITLED: '(Untitled)',
        },
        ROOT_URL: '/',
        CONTENT_URL: '/content.json',
    };
    window.INSIGHT_CONFIG = INSIGHT_CONFIG;
})(window);
</script>

<script src="/js/insight.js"></script>


</div></li>
            </div>
          </div>
                
      </div>
    </div>

</header>



      
            
      <div id="content" class="outer">
        
          <section id="main" style="float:none;"><article id="post-git学习3-分支与合并" style="width: 75%; float:left;" class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" class="article-title" itemprop="name">
      git学习3-分支与合并
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	<a href="/2022/02/27/git%E5%AD%A6%E4%B9%A03-%E5%88%86%E6%94%AF%E4%B8%8E%E5%90%88%E5%B9%B6/" class="article-date">
	  <time datetime="2022-02-27T12:39:21.000Z" itemprop="datePublished">2022-02-27</time>
	</a>

      
    <a class="article-category-link" href="/categories/git/">git</a>

      
	<a class="article-views">
	<span id="busuanzi_container_page_pv">
		PV:<span id="busuanzi_value_page_pv"></span>
	</span>
	</a>

    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="分支与合并"><a href="#分支与合并" class="headerlink" title="分支与合并"></a>分支与合并</h1><h2 id="branch"><a href="#branch" class="headerlink" title="branch"></a><code>branch</code></h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">git branch [--color[=&lt;when&gt;] | --no-color] [--show-current]</span><br><span class="line">	[-v [--abbrev=&lt;n&gt; | --no-abbrev]]</span><br><span class="line">	[--column[=&lt;options&gt;] | --no-column] [--sort=&lt;key&gt;]</span><br><span class="line">	[--merged [&lt;commit&gt;]] [--no-merged [&lt;commit&gt;]]</span><br><span class="line">	[--contains [&lt;commit&gt;]] [--no-contains [&lt;commit&gt;]]</span><br><span class="line">	[--points-at &lt;object&gt;] [--format=&lt;format&gt;]</span><br><span class="line">	[(-r | --remotes) | (-a | --all)]</span><br><span class="line">	[--list] [&lt;pattern&gt;…]</span><br><span class="line">git branch [--track[=(direct|inherit)] | --no-track] [-f] &lt;branchname&gt; [&lt;start-point&gt;]</span><br><span class="line">git branch (--<span class="built_in">set</span>-upstream-to=&lt;upstream&gt; | -u &lt;upstream&gt;) [&lt;branchname&gt;]</span><br><span class="line">git branch --<span class="built_in">unset</span>-upstream [&lt;branchname&gt;]</span><br><span class="line">git branch (-m | -M) [&lt;oldbranch&gt;] &lt;newbranch&gt;</span><br><span class="line">git branch (-c | -C) [&lt;oldbranch&gt;] &lt;newbranch&gt;</span><br><span class="line">git branch (-d | -D) [-r] &lt;branchname&gt;…</span><br><span class="line">git branch --edit-description [&lt;branchname&gt;]</span><br></pre></td></tr></table></figure>
<p><code>branch</code>用于列出、创建或者删除分支。</p>
<p>如果只给出了<code>--list</code>，则列出所有的分支。当前的分支将以绿色高亮显示，并用星号标记。在链接的工作树中签出的任何分支都将以青色突出显示，并用加号标记。</p>
<p>选项<code>-r</code>将列出远程跟踪分支，选项<code>-a</code>将同时显示本地和远程分支。</p>
<p>可以用通过添加<code>&lt;pattern&gt;</code>来筛选符合该模式的分支。（要使用<code>&lt;patterin&gt;</code>，则必须使用<code>--list</code>）。</p>
<p>使用<code>--contains</code>则表示仅显示那些包含<code>&lt;commit&gt;</code>的分支（<code>&lt;commit&gt;</code>的后代）。<code>--no-contains</code> 与其相反，即不包含。</p>
<p>使用<code>--mergerd</code>则表示仅显示那些合并到<code>&lt;commit&gt;</code>的分支。<code>--no-merged</code>相反，即没有合并到<code>&lt;commit&gt;</code>的分支。</p>
<p>第二种形式将创建一个新的名叫<code>&lt;branchname&gt;</code>的分支，其指向当前的HEAD，如果给出<code>&lt;start-point&gt;</code>，则指向给定的位置。一种特殊情况是，可以使用<code>A...B</code>来表示<code>A</code>和<code>B</code>合并的基点的快捷写法（A和B存在一个合并基点）。</p>
<p>注意这种形式会创建一个新的分支，但不会切换到它，可以使用<code>git switch &lt;newBranch&gt;</code>来切换到对应的分支。</p>
<p>一旦一个本地分支是从一个远程追踪分支启动的，那么Git就会自动配置该分支（主要是<code>branch.&lt;name&gt;.remote</code>和<code>branch.&lt;name&gt;.merge</code>配置对），以便后面<code>git pull</code>可以从<code>remote-tracking</code>分支适当地合并。</p>
<p>这个设置可以通过使用<code>--track</code>和<code>--no-track</code>选项来覆盖，或者使用<code>git branch --set-upstream-to</code>来更改。</p>
<p>使用<code>-m</code>或<code>-M</code>（<code>move</code>）选项，<code>&lt;oldbranch&gt;</code>将被重命名为<code>&lt;newbranch&gt;</code>。如果<code>&lt;oldbranch&gt;</code>有一个相应的<code>reflog</code>，它将被重命名以匹配<code>&lt;newbranch&gt;</code>，并且创建一个<code>reflog</code>条目来记住分支的重命名。如果存在<code>&lt;newbranch&gt;</code>，则必须使用<code>-M</code>来强制执行重命名。 </p>
<p><code>-c</code>和<code>-C</code>（<code>copy</code>）选项具有与<code>-m</code>和<code>-M</code>完全相同的语义，只是分支不会被重命名，而是会被复制到一个新名称，连同它的<code>config</code>和<code>reflog</code>。</p>
<p>使用<code>-d</code>或<code>-D</code>选项，<code>&lt;branchname&gt;</code>将被删除。您可以指定多个用于删除的分支。如果分支当前有一个<code>reflog</code>，那么这个<code>reflog</code>也将被删除。</p>
<p>使用<code>-r</code>和<code>-d</code>来删除远程跟踪分支（注意不是删除远程仓库本身，而是删除跟踪）。注意，只有当远程跟踪分支不再存在于远程存储库中时，或者当<code>git fetch</code>被配置为不再获取它们时，才有意义删除它们。</p>
<h3 id="选项"><a href="#选项" class="headerlink" title="选项"></a>选项</h3><ul>
<li><code>-d; --delete</code>：删除一个分支。该分支必须在其上游分支中完全合并，或者在<code>HEAD</code>中(如果没有使用<code>--track</code>或<code>--set-upstream-to</code>设置upstream)。</li>
<li><code>-D</code>：<code>--delete --force</code>的简写。</li>
<li><code>--create-reflog</code>：创建分支的<code>reflog</code>。这激活了对分支<code>ref</code>所做的所有更改的记录，允许使用基于日期的<code>sha1</code>表达式，如<code>&lt;branchname&gt;@{yesterday}</code>。</li>
<li><code>-f; --force</code>：将<code>&lt;branchname&gt;</code>重置为<code>&lt;startpoint&gt;</code>，即使<code>&lt;branchname&gt;</code>已经存在。如果没有<code>-f</code>, <code>git branch</code>拒绝改变一个已经存在的分支。与<code>-d</code>(或<code>--delete</code>)组合，允许删除分支，而不管它的合并状态，或者它是否指向一个有效的提交。与<code>-m</code>(或<code>--move</code>)组合，允许重命名分支，即使新的分支名称已经存在，同样适用于<code>-c</code>(或<code>--copy</code>)。</li>
<li><code>-m; --move</code>：移动/重命名一个分支，以及它的配置和<code>reflog</code>。</li>
<li><code>-M</code>：<code>--move --force</code>的简写。</li>
<li><code>-c; --copy</code>：复制一个分支，连同它的配置和<code>reflog</code>。</li>
<li><code>-C</code>：<code>--copy --force</code>的简写。</li>
<li><code>--color[=&lt;when&gt;]</code>：为分支设置颜色，以突出显示当前、本地和远程跟踪分支。该值必须为always(默认值)、never或auto。</li>
<li><code>--no-color</code>：关闭分支颜色，即使配置文件给出了默认的颜色输出。<code>--color=never</code>。</li>
<li><code>-i; --ignore-case</code>：排序和过滤分支不区分大小写。</li>
<li><code>--column[=&lt;options&gt;]; --no-column</code>：以列（不以列）显示分支列表。</li>
<li><code>r; --remotes</code>：列出或删除(如果与<code>-d</code>一起使用)远程跟踪分支。结合<code>--list</code>来匹配可选的模式。</li>
<li><code>-a; --all</code>：同时列出远程跟踪分支和本地分支。结合<code>--list</code>来匹配可选的模式。</li>
<li><code>-l; --list</code>：列出分支。带有可选<code>&lt;pattern&gt;</code>，例如，<code>git branch --list &#39;maint-*</code>，只列出匹配模式的分支。</li>
<li><code>--show-current</code>：打印当前分支的名称。在分离的HEAD状态下，不打印任何东西。</li>
<li><code>-t; --track</code>：当创建一个新的分支时，设置<code>branch.&lt;name&gt;.remote</code>和<code>branch.&lt;name&gt;.merge</code>以设置新分支的”upstream”跟踪配置。配置会告诉git以<code>git status</code>和<code>git branch -v</code>显示两个分支之间的关系。此外，当新分支被指出时，它可以不带参数地执行<code>git pull</code>操作。</li>
<li><code>--no-track</code>：不设置”upstream”配置，即使分支。设置<code>auto.SetupMerge</code>配置变量。</li>
<li><code>-u &lt;upstream&gt;; --set-upstream-to=&lt;upstream&gt;</code>：设置<code>&lt;branchname&gt;</code>的跟踪信息，使<code>&lt;upstream&gt;</code>被认为是<code>&lt;branchname&gt;</code>的上游分支。如果没有指定<code>&lt;branchname&gt;</code>，则默认为当前分支。</li>
<li><code>--edit-description</code>：打开一个编辑器并编辑文本，以解释分支的用途，以及各种其他命令所使用的功能。可以使用多行解释。</li>
<li><code>contains [commit]</code>：仅列出包含指定提交的分支(如未指定则为HEAD)。</li>
<li><code>--no-contains [&lt;commit&gt;]</code>：只列出不包含指定提交的分支(如果没有指定，则为HEAD)。</li>
<li><code>--merged [&lt;commit&gt;]</code>：仅列出从指定的提交(如果没有指定为HEAD)中可获得提示的分支。</li>
<li><code>--no-merged [&lt;commit&gt;]</code>：仅列出从指定的提交(如果没有指定为HEAD)中无法获得提示的分支。</li>
<li><code>&lt;branchname&gt;</code>：要创建或删除的分支的名称。</li>
<li><code>&lt;start-point&gt;</code>：新的分支头将指向这个提交。它可以是一个分支名、一个<code>commit-id</code>或者一个标签。如果这个选项被省略，则将使用当前的HEAD。</li>
<li><code>&lt;oldbranch&gt;</code>：要重命名的现有分支的名称。</li>
<li><code>&lt;newbranch&gt;</code>：现有分支的新名称。应用与<code>&lt;branchname&gt;</code>相同的限制。</li>
<li><code>--sort=&lt;key&gt;</code>：根据给定的键进行排序。前缀-按值的降序排序。您可以多次使用<code>--sort=&lt;key&gt;</code>选项，在这种情况下，最后一个键成为主键。</li>
<li><code>--points-at &lt;object&gt;</code>：只列出给定对象的分支。</li>
</ul>
<p>值得注意的是：如果关联的远程分支与本地分支名字不一样，那么<code>git push</code>时git会提醒<code>fatal: The upstream branch of yourcurrent branch does not matchthe name of your current branch.</code>然后回给出其他更复杂的提交方式，最好还是把名字统一为一样。</p>
<h2 id="checkout"><a href="#checkout" class="headerlink" title="checkout"></a>checkout</h2><blockquote>
<p>git checkout 这个命令承担了太多职责，既被用来切换分支，又被用来恢复工作区文件，对用户造成了很大的认知负担。</p>
<p>Git社区发布了Git的新版本2.23。在该版本中，有一个特性非常引人瞩目，就是新版本的Git引入了两个新命令 git switch 和 git restore，用以替代现在的 git checkout。换言之，git checkout 将逐渐退出历史舞台。</p>
<p>Git社区决定这样做，是因为目前 git checkout 命令承载了太多的功能，这让新手们感到困惑。git checkout 的核心功能包括两个方面，一个是分支的管理，一个是文件的恢复。这两个核心功能，未来将由 git switch 和 git restore 分别负责。</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">git checkout [-q] [-f] [-m] [&lt;branch&gt;]</span><br><span class="line">git checkout [-q] [-f] [-m] --detach [&lt;branch&gt;]</span><br><span class="line">git checkout [-q] [-f] [-m] [--detach] &lt;commit&gt;</span><br><span class="line">git checkout [-q] [-f] [-m] [[-b|-B|--orphan] &lt;new-branch&gt;] [&lt;start-point&gt;]</span><br><span class="line">git checkout [-f|--ours|--theirs|-m|--conflict=&lt;style&gt;] [&lt;tree-ish&gt;] [--] &lt;pathspec&gt;…</span><br><span class="line">git checkout [-f|--ours|--theirs|-m|--conflict=&lt;style&gt;] [&lt;tree-ish&gt;] --pathspec-from-file=&lt;file&gt; [--pathspec-file-nul]</span><br><span class="line">git checkout (-p|--patch) [&lt;tree-ish&gt;] [--] [&lt;pathspec&gt;…]</span><br></pre></td></tr></table></figure>
<p>更新工作树中的文件以匹配索引或指定树中的版本。如果没有给出<code>pathspec</code>, <code>git checkout</code>也会更新HEAD，将指定的分支设置为当前分支。</p>
<h3 id="git-checkout-lt-branch-gt"><a href="#git-checkout-lt-branch-gt" class="headerlink" title="git checkout  [&lt;branch&gt;]"></a><code>git checkout  [&lt;branch&gt;]</code></h3><p>切换分支到到<code>&lt;branch&gt;</code>。</p>
<h3 id="git-checkout-b-B-lt-new-branch-gt-lt-start-point-gt"><a href="#git-checkout-b-B-lt-new-branch-gt-lt-start-point-gt" class="headerlink" title="git checkout -b|-B &lt;new-branch&gt; [&lt;start-point&gt;]"></a><code>git checkout -b|-B &lt;new-branch&gt; [&lt;start-point&gt;]</code></h3><p>指定<code>-b</code>会导致创建一个新分支，就好像调用了<code>git-branch</code>，然后切换到它。并且可以指出新分支的起始点<code>&lt;start-point&gt;</code></p>
<p>如果指定<code>-B</code>，那么如果<code>&lt;new-branch&gt;</code>不存在则创建，<strong>否则就重置该分支</strong>。这相当于：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ git branch -f &lt;branch&gt; [&lt;start-point&gt;]</span><br><span class="line">$ git checkout &lt;branch&gt;</span><br></pre></td></tr></table></figure>
<h3 id="git-checkout-detach-lt-branch-gt-；git-checkout-detach-lt-commit-gt"><a href="#git-checkout-detach-lt-branch-gt-；git-checkout-detach-lt-commit-gt" class="headerlink" title="git checkout  --detach [&lt;branch&gt;]；git checkout [--detach] &lt;commit&gt;"></a><code>git checkout  --detach [&lt;branch&gt;]；git checkout [--detach] &lt;commit&gt;</code></h3><p>将HEAD指向<code>&lt;commit&gt;</code>，如果提供的是<code>&lt;branch&gt;</code>，则将HEAD切换到<code>&lt;branch&gt;</code>的最新<code>commit</code>。同时更新工作树中的索引和文件。工作树中文件的本地修改将被保留，因此最终的工作树将是提交中记录的状态加上本地修改。</p>
<p>省略<code>&lt;branch&gt;</code>将会将HEAD切换到当前分支的顶端。</p>
<h3 id="选项-1"><a href="#选项-1" class="headerlink" title="选项"></a>选项</h3><ul>
<li><p><code>-f; --force</code>：当切换分支时，即使索引或工作树与HEAD不同，即使在切换过程中存在未跟踪的文件，也要继续进行。这用于丢弃本地更改和任何未跟踪的文件或目录。</p>
</li>
<li><p><code>--ours; --theirs</code>：当发生冲突的时候，决定是从<code>#2 (ours) or #3 (theirs)</code>中的哪一个。注意在使用<code>git rebase</code>和<code>git pull --rebase</code>时，ours和theirs可能会交换。<code>--ours</code>是选择保留本地代码。<code>--theirs</code>是选择保留合并分支代码。</p>
</li>
<li><p><code>-b &lt;new-branch&gt;</code>：创建一个名为<code>&lt;new-branch&gt;</code>的新分支，并在<code>&lt;start-point&gt;</code>处启动它。</p>
</li>
<li><p><code>-B &lt;new-branch&gt;</code>：创建分支<code>&lt;new-branch&gt;</code>，并在<code>&lt;start-point&gt;</code>处启动它;如果它已经存在，则将其重置为<code>&lt;start-point&gt;</code>。这相当于运行<code>git branch</code> with <code>-f</code>。</p>
</li>
<li><p><code>-t; --track</code>：当创建一个新的分支时，设置<code>upstream</code>配置。</p>
</li>
<li><p><code>--bo-track</code>：不要设置“upstream”配置，即使分支。<code>autoSetupMerge</code>配置变量为true。</p>
</li>
<li><p><code>--guess; --no-guess</code>：如果没有找到<code>&lt;branch&gt;</code>，但是在一个远程(调用它<code>&lt;remote&gt;</code>)中确实存在一个跟踪分支，并具有匹配的名称。其与下面语句一样：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git checkout -b &lt;branch&gt; --track &lt;remote&gt;/&lt;branch&gt;</span><br></pre></td></tr></table></figure>
<p>如果分支存在于多个远程中，并且其中一个分支由<code>checkout.defaultRemote</code>配置变量命名，我们将使用该分支来消除歧异，即使<code>&lt;branch&gt;</code>在所有远程中不是唯一的。</p>
<p><code>--guess</code>是默认行为。用<code>--no-guess</code>来禁用它。</p>
</li>
<li><p><code>-l</code>：创建新分支的<code>reflog</code>;</p>
</li>
<li><p><code>-d; --detach</code>：切换到一个commit用来检查或者可放弃的实验（而不是切换到一个分支），当<code>&lt;commit&gt;</code>不是分支名时，<code>git checkout &lt;commit&gt;</code>的默认行为。</p>
</li>
<li><p><code>--orphan &lt;new-branch&gt; [&lt;start-point&gt;]</code>：创建一个新的孤立分支，命名为<code>&lt;new-branch&gt;</code>，从<code>&lt;start-point&gt;</code>开始，并切换到它。<strong>在这个新分支上进行的第一次提交将没有父节点，它将是一个新历史的根节点，与所有其他分支完全断开连接并进行提交。</strong></p>
<p>索引和工作树将被调整，就像以前运行过<code>git checkout &lt;start-point&gt;</code>一样。这允许开始一个新的历史记录，记录一组类似于<code>&lt;start-point&gt;</code>的路径，通过简单地运行git commit -a来进行根提交。</p>
</li>
<li><p><code>-m; --merge</code>：在切换分支时，如果您对当前分支和要切换的分支之间的一个或多个文件进行了本地修改，则该命令将拒绝切换分支，以便在上下文中保留您的修改。但是，使用这个选项，当前分支、工作树内容和新分支之间的三方合并就完成了，您将位于新分支上。当合并冲突发生时，冲突路径的索引条目将保持未合并状态，您需要解决冲突并使用<code>git add</code>标记已解决的路径。</p>
</li>
<li><p><code>--overwrite-ignore; --no-overwrite-ignore</code>：切换分支时，静默地覆盖被忽略的文件，这是默认行为。当新分支包含被忽略的文件时，使用<code>--no-overwrite-ignore</code>中止操作。</p>
</li>
<li><p><code>&lt;branch&gt;</code>：要切换得到分支。</p>
</li>
<li><p><code>&lt;new-branch&gt;</code>：新建分支的名字。</p>
</li>
<li><p><code>&lt;start-point&gt;</code>：用于启动新分支的提交的名称，默认是<code>HEAD</code>。</p>
</li>
<li><p><code>&lt;tree-ish&gt;</code>：被切换的树。如果没有指定，默认指定索引。</p>
</li>
</ul>
<h2 id="switch"><a href="#switch" class="headerlink" title="switch"></a>switch</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">git switch [&lt;options&gt;] [--no-guess] &lt;branch&gt;</span><br><span class="line">git switch [&lt;options&gt;] --detach [&lt;start-point&gt;]</span><br><span class="line">git switch [&lt;options&gt;] (-c|-C) &lt;new-branch&gt; [&lt;start-point&gt;]</span><br><span class="line">git switch [&lt;options&gt;] --orphan &lt;new-branch&gt;</span><br></pre></td></tr></table></figure>
<p>切换到特定分支。工作树和索引也会更新。</p>
<p>注意，当使用<code>git switch branchName</code>时，如果<code>branchName</code>不存在，则自动创建一个新的分支然后切换到该分支（行为与<code>checkout</code>一致）。</p>
<p>可以通过添加<code>-c</code>，<code>-C</code>，自动的从一个远程仓库的同名分支创建一个新的分支。或者使用<code>--detach</code>来从一个分支分离出工作树，然后切换到该分支。</p>
<p>交换分支不需要干净的索引和工作树，也就是说允许存在未索引和未提交的文件。但是如果操作将导致本地变更的丢失，则会打断操作。（使用<code>--discard-changes</code>或者<code>--merge</code>可以用来在这种情况下抛弃改变或者合并）</p>
<h3 id="选项-2"><a href="#选项-2" class="headerlink" title="选项"></a>选项</h3><ul>
<li><p><code>&lt;branch&gt;</code>：要切换到的分支。</p>
</li>
<li><p><code>&lt;new-branch&gt;</code>：新分支的名字。</p>
</li>
<li><p><code>&lt;start-point&gt;</code>：新分支的起始点。指定<code>&lt;start-point&gt;</code>允许根据历史上的其他点(而不是HEAD当前点)创建一个分支。</p>
</li>
<li><p><code>-c &lt;new-branch&gt;; --create &lt;new-branch&gt;</code>：在切换到分支之前，从<code>&lt;start-point&gt;</code>开始创建一个名为<code>&lt;new-branch&gt;</code>的新分支。下面两种写法是相同的：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ git branch &lt;new-branch&gt;</span><br><span class="line">$ git switch &lt;new-branch&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p><code>-C &lt;new-branch&gt;; --force-create &lt;new-branch&gt;</code>：类似于<code>--create</code>，只是如果<code>&lt;new-branch&gt;</code>已经存在，它将被重置为<code>&lt;start-point&gt;</code>。下面两种写法是相同的：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ git branch -f &lt;new-branch&gt;</span><br><span class="line">$ git switch &lt;new-branch&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p><code>-d; -detach</code>：切换到一个commit点，以进行检查或者可放弃的实验。</p>
</li>
<li><p><code>--guess; --no-guess</code>：如果没有找到<code>&lt;branch&gt;</code>，但在一个具有匹配名称的远程(称为<code>&lt;remote&gt;</code>)中确实存在一个跟踪分支，则将其视为等效的：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git switch -c &lt;branch&gt; --track &lt;remote&gt;/&lt;branch&gt;</span><br></pre></td></tr></table></figure>
<p>即如果本地不存在<code>&lt;branch&gt;</code>，但在远程分支中存在同名的分支，则直接将其<code>clone</code>到本地，并且将其<code>upstream</code>设置为远程分支。</p>
<p>如果分支存在于多个远程仓库中，并且其中一个分支由<code>checkout.defaultRemote</code>配置变量命名，我们将使用该分支来消除歧异，即使<code>&lt;branch&gt;</code>在所有远程中不是唯一的。</p>
</li>
<li><p><code>-f; --force</code>：–discard-changes`的别名。</p>
</li>
<li><code>--discard-changes</code>：即使索引或工作树与HEAD不同，也要继续执行命令。索引和工作树都被恢复以匹配交换目标。如果指定了<code>--recursed -submodules</code>，子模块内容也会被恢复以匹配切换目标。这个操作用于丢弃本地的变更。</li>
<li><code>-m; --merge</code>：如果有一个或多个文件在当前分支和要切换到的分支不同。<code>switch</code>命令将会终止，但是加上了<code>--merge</code>后，被当前分支将会合到将要被切换的分支，您将位于新分支上。</li>
<li><code>-t; --track [direct | inheret]</code>：当创建一个新的分支时，设置“upstream”配置。</li>
<li><code>--orphan &lt;new-branch&gt;</code>：创建一个新的孤立分支，名为<code>&lt;new-branch&gt;</code>。所有跟踪文件都将被被删除。</li>
<li><code>--ignore-other-worktrees</code>：当需要的ref已经被另一个工作树检出时，<code>git switch</code>将会拒绝执行。这个选项可以强行使其签出到该ref上。换句话说，ref可以被多个工作树持有。</li>
<li><code>--recurse-submodules; --no-recurse-submodules</code>：使用<code>--recurse-submodules</code>将根据<code>superproject</code>中记录的提交更新所有活动子模块的内容。如果什么都没有使用(或者<code>--no- recursive -submodules</code>)，子模块工作树将不会被更新。就像git-submodule[1]一样，这将分离子模块的HEAD。</li>
</ul>
<h2 id="log"><a href="#log" class="headerlink" title="log"></a>log</h2><p>用于展示commit日志。</p>
<p>该命令从给出的提交通过<code>parent</code>链列出所有可达的commit，并且不包含那些以<code>^</code>开头的可达的commits。在默认情况下,输出以反向时间顺序给出。</p>
<p>比如，以下的命令：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">log</span> foo bar ^baz</span><br></pre></td></tr></table></figure>
<p>意味着-列出所有从foo或bar可到达，但从baz不能到达的提交。</p>
<h3 id="选项-3"><a href="#选项-3" class="headerlink" title="选项"></a>选项</h3><ul>
<li><code>--follow</code>：继续列出重命名以外的文件历史记录(仅适用于单个文件)。</li>
<li><code>--no-decorate; --decorate[=short|full|auto|no]</code>：打印显示的任何提交的ref名称。如果指定了short，则不会打印<code>refs/heads/</code>、<code>refs/tags/</code>和<code>refs/remotes/</code>的前缀。如果指定了full，则打印完整的引用名称(包括前缀)。如果指定了auto，那么如果输出到终端，则ref名称将显示为short，否则不显示任何ref名称。选项<code>--decorate</code>是<code>--decorate=shor</code>t的简写。如果配置了，默认为<code>log. decorator</code>的配置值，否则为auto。</li>
<li><code>--source</code>：打印出在命令行中给出的每个提交的引用名称。</li>
</ul>
<h2 id="stash"><a href="#stash" class="headerlink" title="stash"></a>stash</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">git stash list [&lt;<span class="built_in">log</span>-options&gt;]</span><br><span class="line">git stash show [-u|--include-untracked|--only-untracked] [&lt;diff-options&gt;] [&lt;stash&gt;]</span><br><span class="line">git stash drop [-q|--quiet] [&lt;stash&gt;]</span><br><span class="line">git stash ( pop | apply ) [--index] [-q|--quiet] [&lt;stash&gt;]</span><br><span class="line">git stash branch &lt;branchname&gt; [&lt;stash&gt;]</span><br><span class="line">git stash [push [-p|--patch] [-S|--staged] [-k|--[no-]keep-index] [-q|--quiet]</span><br><span class="line">	     [-u|--include-untracked] [-a|--all] [-m|--message &lt;message&gt;]</span><br><span class="line">	     [--pathspec-from-file=&lt;file&gt; [--pathspec-file-nul]]</span><br><span class="line">	     [--] [&lt;pathspec&gt;…]]</span><br><span class="line">git stash clear</span><br><span class="line">git stash create [&lt;message&gt;]</span><br><span class="line">git stash store [-m|--message &lt;message&gt;] [-q|--quiet] &lt;commit&gt;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>回想之前介绍的<code>switch</code>和<code>checkout</code>，当工作树或者索引有修改的时候，是无法切换分支的。而<code>stash</code>就是为了解决这个问题出现的。其可以将工作树或索引的文件保存在本地。之后便可以切换分支。</p>
</blockquote>
<p>当你想要记录工作目录和索引的当前状态，但又想要回到一个干净的工作目录时，使用<code>git stash</code>。该命令保存本地修改，然后可以切换到其他分支，在其他分支操作完切换回来之后，再恢复文件。</p>
<p>通过这个命令隐藏的修改可以进行以下操作：</p>
<ul>
<li><code>git stash list</code>：列举修改。</li>
<li><code>git stash show</code>：检查修改。</li>
<li><code>git stash apply</code>：恢复修改。</li>
<li><code>git stash; git stash push</code>：隐藏当前状态。一个隐藏在默认情况下被命名为<code>WIP on branchname …</code>，但是当创建一个隐藏时，也可以在命令行上给出一个更描述性的消息。</li>
</ul>
<p>创建的最新隐藏内容存储在<code>refs/stash</code>中;旧的堆栈可以在此引用的<code>reflog</code>中找到，可以使用通常的<code>reflog</code>语法命名。</p>
<h3 id="命令"><a href="#命令" class="headerlink" title="命令"></a>命令</h3><h4 id="push"><a href="#push" class="headerlink" title="push"></a><code>push</code></h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">push [-p|--patch] [-S|--staged] [-k|--[no-]keep-index] [-u|--include-untracked] [-a|--all] [-q|--quiet] [-m|--message &lt;message&gt;] [--pathspec-from-file=&lt;file&gt; [--pathspec-file-nul]] [--] [&lt;pathspec&gt;…]</span><br></pre></td></tr></table></figure>
<p>存储当前本地修改为一个<code>stash</code>。</p>
<p><code>&lt;message&gt;</code>是可选的，其给出了描述和隐藏状态。</p>
<p>其中<code>push</code>关键可以省略，在此模式下，不允许使用非选项参数，以防止拼写错误的子命令生成不需要的隐藏条目。这其中的两个例外是<code>stash -p</code>，它作为<code>stash push -p</code>的别名和pathspec元素，它允许在双连字符之后<code>--</code>以消除歧义。</p>
<h4 id="list"><a href="#list" class="headerlink" title="list"></a><code>list</code></h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">list [&lt;<span class="built_in">log</span>-options&gt;]</span><br></pre></td></tr></table></figure>
<p>列出你现在的储藏条目。每个储藏条目都列有它的名字、当条目被创建时当前的分支的名称以及条目所基于的提交的简短描述。</p>
<p>该命令采用适用于git log命令的选项来控制显示的内容以及如何显示。</p>
<h4 id="show"><a href="#show" class="headerlink" title="show"></a><code>show</code></h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">show [-u|--include-untracked|--only-untracked] [&lt;diff-options&gt;] [&lt;stash&gt;]</span><br></pre></td></tr></table></figure>
<p>展示在<code>stash</code>中的记录和当前文件内容的不同。</p>
<h4 id="pop"><a href="#pop" class="headerlink" title="pop"></a><code>pop</code></h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pop [--index] [-q|--quiet] [&lt;stash&gt;]</span><br></pre></td></tr></table></figure>
<p>从<code>stash</code>列表中移除单个<code>stash</code>状态，并将其应用到当前工作树状态的顶部。工作目录必须与索引匹配。</p>
<p>当发生冲突的时候，该命令会失败，但该<code>stash</code>不会从<code>stash</code>列表中移除。此时可以手动解决冲突，然后使用<code>git stash drop</code>来移除。</p>
<h4 id="apply"><a href="#apply" class="headerlink" title="apply"></a><code>apply</code></h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apply [--index] [-q|--quiet] [&lt;stash&gt;]</span><br></pre></td></tr></table></figure>
<p>与<code>pop</code>类似，但其不会将当前<code>stash</code>从<code>stash</code>列表中移除。</p>
<h4 id="branch-1"><a href="#branch-1" class="headerlink" title="branch"></a>branch</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">branch &lt;branchname&gt; [&lt;stash&gt;]</span><br></pre></td></tr></table></figure>
<p>从最初创建<code>&lt;stash&gt;</code>的提交开始，创建并切换到一个名为<code>&lt;branchname&gt;</code>的新分支，将<code>&lt;stash&gt;</code>中记录的更改应用到新的工作树和索引。如果成功，并且<code>&lt;stash&gt;</code>是形式<code>stash@{&lt;revision&gt;}</code>的引用，那么它将删除<code>&lt;stash&gt;</code>。</p>
<p>如果你运行<code>git stash push</code>的分支发生了足够大的变化，以至于<code>git stash apply</code>由于冲突而失败，那么这是非常有用的。因为这个隐藏条目应用于在git隐藏运行时是HEAD的提交上，所以它会恢复原来的隐藏状态而不产生冲突。</p>
<h4 id="clear"><a href="#clear" class="headerlink" title="clear"></a>clear</h4><p>删除所有的<code>stash</code>条目。请注意，这些条目随后将被删除，并且可能无法恢复（<strong>谨慎</strong>）。</p>
<h4 id="drop"><a href="#drop" class="headerlink" title="drop"></a><code>drop</code></h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">drop [-q|--quiet] [&lt;stash&gt;]</span><br></pre></td></tr></table></figure>
<p>从<code>stash</code>条目列表中删除单个<code>stash</code>条目。（不加参数则删除最近的一条）</p>
<h4 id="create"><a href="#create" class="headerlink" title="create"></a><code>create</code></h4><p>创建一个<code>stash</code>条目(这是一个常规提交对象)并返回它的对象名称，而不将其存储在<code>ref</code>名称空间的任何地方。这对脚本很有用。</p>
<p><code>store</code></p>
<p>将通过<code>git stash create</code>(一个悬空的合并提交)创建的<code>stash</code>存储在<code>stash ref</code>中，更新<code>stash reflog</code>。这对脚本很有用。这可能不是你想要使用的命令。</p>
<h3 id="选项-4"><a href="#选项-4" class="headerlink" title="选项"></a>选项</h3><ul>
<li><code>-a; --all</code>：此选项仅对push和save命令有效。所有被忽略和未跟踪的文件也被隐藏，然后用<code>git clean</code>清理。</li>
<li><code>-u; --include-untracked; --no-include-untracked</code>：当使用<code>push</code>和<code>save</code>命令时，所有未跟踪的文件也会被隐藏，然后用git clean清理。当与<code>show</code>命令一起使用时，将隐藏条目中的未跟踪文件显示为diff的一部分。</li>
<li><code>--only-untracked</code>：（该选项仅对show命令有效）只显示隐藏条目中未跟踪的文件作为差异的一部分。</li>
<li><code>--index</code>：（此选项仅对pop和apply命令有效）尝试不仅恢复工作树的更改，而且恢复索引的更改。然而，当有冲突时，可能会失败。</li>
<li><code>-k; --keep-index; --no-keep-index</code>：（此选项仅对push和save命令有效）已经添加到索引中的所有更改都保持不变。</li>
<li><code>-S; --staged</code>：（此选项仅对push和save命令有效）只隐藏当前进行的更改。这类似于基本的git提交，除了状态被提交到stash而不是当前的分支。(<code>patch</code>选项比该命令优先级高)</li>
<li><code>--pathspec-from-file=&lt;file&gt;</code>：（此选项仅对push命令有效）从文件中读取<code>pathspec</code>。</li>
<li><code>&lt;pathspec&gt;…</code>：（此选项仅对push命令有效）新的存放条目只记录匹配路径规范的文件的修改状态。在随后的恢复时，索引项和工作树文件也会被回滚到这些文件在HEAD中的状态，而不匹配路径规范的文件则会保持不变。</li>
</ul>
<h2 id="workwtree"><a href="#workwtree" class="headerlink" title="workwtree"></a><code>workwtree</code></h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">git worktree add [-f] [--detach] [--checkout] [--lock [--reason &lt;string&gt;]] [-b &lt;new-branch&gt;] &lt;path&gt; [&lt;commit-ish&gt;]</span><br><span class="line">git worktree list [-v | --porcelain]</span><br><span class="line">git worktree lock [--reason &lt;string&gt;] &lt;worktree&gt;</span><br><span class="line">git worktree move &lt;worktree&gt; &lt;new-path&gt;</span><br><span class="line">git worktree prune [-n] [-v] [--expire &lt;expire&gt;]</span><br><span class="line">git worktree remove [-f] &lt;worktree&gt;</span><br><span class="line">git worktree repair [&lt;path&gt;…]</span><br><span class="line">git worktree unlock &lt;worktree&gt;</span><br></pre></td></tr></table></figure>
<p>工作树可以允许将一个仓库的不同分支分别存储到不同的文件目录。而免去了反复切换分支的麻烦（特别是对于很大的项目）。</p>
<p>可以通过<code>git worktree add</code>创建一个新的与该仓库联系的工作树。这个新的工作树被称为为“链接工作树”，而原本的工作树被称为“主工作树”。一个仓库可以有一个主工作树和多个链接工作树。可以使用<code>git worktree remove</code>来移除已存在的工作树。</p>
<p>通过<code>git worktree add &lt;path&gt;</code>，Git会自动创建一个新的分支（其名字是该路径的最后一个文件夹名字），然后将该目录作为该分支的工作树。</p>
<p>也可以通过<code>git worktree add &lt;path&gt; &lt;branch&gt;</code>来将现有的分支和目录链接起来。另一方面，如果您只是计划进行一些实验性的更改或进行测试，而不影响现有的开发，那么创建一个与任何分支都不相关的一次性工作树通常是很方便的。例如，<code>git worktree add -d &lt;path&gt;</code>将在当前分支的同一个提交中创建一个新的工作树，该树带有一个分离的HEAD。</p>
<p>如果一个工作树在没有使用<code>git worktree remove</code>的情况下被删除（即手动删除），那么它所关联的管理文件(驻留在存储库中)最终将被自动删除，或者你可以在主目录或者任何链接的工作树中运行<code>git worktree prune</code>命令来清理任何过期的管理文件。</p>
<p>如果一个链接的工作树存储在一个不总是挂载的便携设备或网络共享中，你可以通过发出<code>git worktree lock</code>命令来防止它的管理文件被删除，还可以指定<code>--reason</code>来解释为什么工作树被锁定。</p>
<h3 id="命令-1"><a href="#命令-1" class="headerlink" title="命令"></a>命令</h3><h4 id="add-lt-path-gt-lt-commit-ish-gt"><a href="#add-lt-path-gt-lt-commit-ish-gt" class="headerlink" title="add &lt;path&gt; [&lt;commit-ish&gt;]"></a><code>add &lt;path&gt; [&lt;commit-ish&gt;]</code></h4><p>创建<code>&lt;path&gt;</code>并切换<code>&lt;commit-ish&gt;</code>到其中。新的工作目录链接到当前的存储库，共享除工作目录特定文件(如HEAD、index等)外的所有内容。</p>
<p>如果<code>&lt;commit-ish&gt;</code>是一个分支名称(叫它<code>&lt;branch&gt;</code>)，并且没有找到它，而且<code>-B</code>、<code>-b</code>和<code>--detach</code>都没有使用，但是在一个远程(叫它<code>&lt;remote&gt;</code>)中确实存在一个跟踪分支，具有匹配的名称，则将其视为等价的:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git worktree add --track -b &lt;branch&gt; &lt;path&gt; &lt;remote&gt;/&lt;branch&gt;</span><br></pre></td></tr></table></figure>
<p>如果分支存在于多个远程中，并且其中一个分支由<code>checkout.defaultRemote</code>配置变量命名，我们将使用该分支来消除歧异，即使<code>&lt;branch&gt;</code>在所有远程中不是唯一的。</p>
<p>如果省略了<code>&lt;commit-ish</code>&gt;并且没有使用<code>-B</code>、<code>-b</code>和<code>--detach</code>，那么，为了方便起见，新的工作树与一个以<code>$(basename &lt;path&gt;</code>)命名的分支(称为<code>&lt;branch&gt;</code>)相关联。如果<code>&lt;branch&gt;</code>不存在，将自动创建一个基于HEAD的新分支，就像给出了<code>-b &lt;branch&gt;</code>一样。如果<code>&lt;branch&gt;</code>确实存在，它将在新的工作树中检出，如果没有在其他地方检出，否则命令将拒绝创建工作树。</p>
<h4 id="list-1"><a href="#list-1" class="headerlink" title="list"></a><code>list</code></h4><p>列出每个工作树的详细信息。首先列出主工作树，然后是每个链接的工作树。输出细节包括工作树是否空白，当前签出的修订，当前签出的分支(如果没有，则为“detached HEAD”)。如果工作树被锁定，则显示“locked”，如果工作树可以通过prune命令进行修剪，则显示“prunable”。</p>
<h4 id="lock"><a href="#lock" class="headerlink" title="lock"></a><code>lock</code></h4><p>如果工作树位于不总是挂载的便携设备或网络共享上，锁定它，以防止其管理文件被自动删除。这也可以防止它被移动或删除。可以使用<code>--reason</code>指定锁的原因。</p>
<h4 id="move"><a href="#move" class="headerlink" title="move"></a><code>move</code></h4><p>将一棵工作树移动到一个新的位置。请注意，不能使用此命令移动包含子模块的主工作树或链接工作树。</p>
<h4 id="prune"><a href="#prune" class="headerlink" title="prune"></a><code>prune</code></h4><p>删除<code>$GIT_DIR/worktrees</code>中的工作树信息。</p>
<h4 id="remove"><a href="#remove" class="headerlink" title="remove"></a><code>remove</code></h4><p>移除一个工作树。只有无污染的工作树(没有未被跟踪的文件和在被跟踪的文件中没有修改)可以被删除。不干净的工作树或有子模块的工作树可以用<code>--force</code>移除。主工作树不能被移除。</p>
<h4 id="repair-lt-path-gt-…"><a href="#repair-lt-path-gt-…" class="headerlink" title="repair [&lt;path&gt;…]"></a><code>repair [&lt;path&gt;…]</code></h4><p>如果可能，修复工作树管理文件，如果它们由于外部因素而损坏或过时。</p>
<p>例如，如果主工作树(或裸存储库)被移动，链接的工作树将无法找到它。在主工作树中运行修复将重新建立连接的工作树到主工作树的连接。</p>
<p>类似地，如果一个链接的工作树在没有使用<code>git worktree move</code>的情况下被移动，那么主工作树(或者裸存储库)将无法找到它。在最近移动的工作树中运行修复将重新建立连接。如果移动了多个链接的工作树，则使用每个工作树的新<code>&lt;path&gt;</code>作为参数从任何工作树运行修复，将重新建立到所有指定路径的连接。</p>
<p>如果手动移动了主工作树和链接工作树，则在主工作树中运行修复并指定每个链接工作树的新<path>将重新建立两个方向上的所有连接。</p>
<h4 id="unlock"><a href="#unlock" class="headerlink" title="unlock"></a><code>unlock</code></h4><p>解锁工作树，允许对其进行修剪、移动或删除。</p>
<h3 id="选项-5"><a href="#选项-5" class="headerlink" title="选项"></a>选项</h3><ul>
<li><p><code>-f; --force</code>：默认情况下，如果<code>&lt;commit-ish</code>&gt;是一个分支名并且已经被另一个工作树检出，或者<code>&lt;path&gt;</code>已经被分配到某个工作树但现在丢失了(例如，如果手动删除了<code>&lt;path&gt;</code>)， add拒绝创建新的工作树。这个选项覆盖了这些保护措施。要添加一个缺失但锁定的工作树路径，请指定两次<code>--force</code>。</p>
<p><code>move</code>拒绝移动锁定的工作树，除非指定两次<code>-force</code>。如果目的地已经被分配给其他工作树，但是现在丢失了(例如，如果手动删除了<code>&lt;new-path&gt;</code>)，那么<code>--force</code>允许移动继续;如果目的地被锁定，使用——force两次。</p>
<p><code>remove</code>拒绝移除不干净的工作树，除非使用<code>--force</code>。要移除锁定的工作树，指定两次<code>--force</code>。</p>
</li>
<li><p><code>-b &lt;new-branch&gt;; -B &lt;new-branch&gt;</code>：使用<code>add</code>命令时，从<code>&lt;commit-ish&gt;</code>开始创建一个名为<code>&lt;new-branch&gt;</code>的新分支，并将<code>&lt;new-branch&gt;</code>检出到新的工作树中。如果省略<code>&lt;commit-ish&gt;</code>，则默认为HEAD。默认情况下，<code>-b</code>拒绝创建一个已经存在的新分支。<code>-B</code>覆盖这个安全措施，将<code>&lt;new-branch&gt;</code>重置为<code>&lt;commit-ish&gt;</code>。</p>
</li>
<li><p><code>-d; --detach</code>：使用<code>add</code>命令时，在新的工作树中分离HEAD。</p>
</li>
<li><p><code>--[no-]checkout</code>：默认情况下，添加检出<code>&lt;commit-ish&gt;</code>，但是<code>--no-checkout</code>可以用来禁止检出。</p>
</li>
<li><p><code>--[no-]guess-remote</code>：使用<code>worktree add &lt;path&gt;</code>，并没有<code>&lt;commit-ish&gt;</code>时，并不从头创建一个新的分支,如果存在一个远程仓库的分支匹配<code>&lt;path&gt;</code>的基地址名，则基于该远程分支来新建分支，并将其<code>upstram</code>为该远程分支。</p>
</li>
<li><p><code>--[no-]track</code>：当创建一个新分支时，如果<code>&lt;commit-ish&gt;</code>是一个分支，则将其标记为来自新分支的“upstream”。如果<code>&lt;commit-ish&gt;</code>是一个远程跟踪分支，这是默认值。</p>
</li>
<li><p><code>--reason &lt;string&gt;</code>：使用<code>lock</code>或<code>add --lock</code>，解释为什么工作树被锁定。</p>
</li>
</ul>

      
    </div>
    <footer class="article-footer">
      
        <div id="donation_div"></div>


<script src="/js/vdonate.js"></script>

<script>
var a = new Donate({
  title: '如果觉得我的文章对您有用，请随意打赏。您的支持将鼓励我继续创作!', // 可选参数，打赏标题
  btnText: 'Donate', // 可选参数，打赏按钮文字
  el: document.getElementById('donation_div'),
  wechatImage: 'http://39.106.203.62:7777/mm_facetoface_collect_qrcode_1532532148519.png',
  alipayImage: 'http://39.106.203.62:7777/1532532158487.jpg'
});
</script>
      
      
      <div>
        <ul class="post-copyright">
          <li class="post-copyright-author">
          <strong>Post author:  </strong>Michael Wang</a>
          </li>
          <li class="post-copyright-link">
          <strong>Post link:  </strong>
          <a href="/2022/02/27/git学习3-分支与合并/" target="_blank" title="git学习3-分支与合并">http://yoursite.com/2022/02/27/git学习3-分支与合并/</a>
          </li>
          <li class="post-copyright-license">
            <strong>Copyright Notice:   </strong>
            All articles in this blog are licensed under <a rel="license" href="https://creativecommons.org/licenses/by-nc-nd/4.0/" target="_blank" title="Attribution-NonCommercial-NoDerivatives 4.0 International (CC BY-NC-ND 4.0)">CC BY-NC-ND 4.0</a>
            unless stating additionally.
          </li>
         
        </ul>
<div>

      
      
        
	<div id="comment">
		<!-- 来必力City版安装代码 -->
		<div id="lv-container" data-id="city" data-uid="MTAyMC8yOTQ4MS82MDQ5">
		<script type="text/javascript">
		   (function(d, s) {
		       var j, e = d.getElementsByTagName(s)[0];

		       if (typeof LivereTower === 'function') { return; }

		       j = d.createElement(s);
		       j.src = 'https://cdn-city.livere.com/js/embed.dist.js';
		       j.async = true;

		       e.parentNode.insertBefore(j, e);
		   })(document, 'script');
		</script>
		<noscript>为正常使用来必力评论功能请激活JavaScript</noscript>
		</div>
		<!-- City版安装代码已完成 -->
	</div>



      
      

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2022/02/27/git%E5%AD%A6%E4%B9%A04-%E5%85%B1%E4%BA%AB%E5%92%8C%E6%9B%B4%E6%96%B0%E9%A1%B9%E7%9B%AE/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          git学习4-共享和更新项目
        
      </div>
    </a>
  
  
    <a href="/2022/02/27/git%E5%AD%A6%E4%B9%A02-%E5%9F%BA%E6%9C%AC%E5%BF%AB%E7%85%A7/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">git学习2-基本快照</div>
    </a>
  
</nav>

  
</article>

<!-- Table of Contents -->

  <aside id="toc-sidebar">
    <div id="toc" class="toc-article">
    <strong class="toc-title">Contents</strong>
    
        <ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%88%86%E6%94%AF%E4%B8%8E%E5%90%88%E5%B9%B6"><span class="nav-number">1.</span> <span class="nav-text">分支与合并</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#branch"><span class="nav-number">1.1.</span> <span class="nav-text">branch</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%80%89%E9%A1%B9"><span class="nav-number">1.1.1.</span> <span class="nav-text">选项</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#checkout"><span class="nav-number">1.2.</span> <span class="nav-text">checkout</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#git-checkout-lt-branch-gt"><span class="nav-number">1.2.1.</span> <span class="nav-text">git checkout  [&lt;branch&gt;]</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#git-checkout-b-B-lt-new-branch-gt-lt-start-point-gt"><span class="nav-number">1.2.2.</span> <span class="nav-text">git checkout -b|-B &lt;new-branch&gt; [&lt;start-point&gt;]</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#git-checkout-detach-lt-branch-gt-%EF%BC%9Bgit-checkout-detach-lt-commit-gt"><span class="nav-number">1.2.3.</span> <span class="nav-text">git checkout  --detach [&lt;branch&gt;]；git checkout [--detach] &lt;commit&gt;</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%80%89%E9%A1%B9-1"><span class="nav-number">1.2.4.</span> <span class="nav-text">选项</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#switch"><span class="nav-number">1.3.</span> <span class="nav-text">switch</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%80%89%E9%A1%B9-2"><span class="nav-number">1.3.1.</span> <span class="nav-text">选项</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#log"><span class="nav-number">1.4.</span> <span class="nav-text">log</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%80%89%E9%A1%B9-3"><span class="nav-number">1.4.1.</span> <span class="nav-text">选项</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#stash"><span class="nav-number">1.5.</span> <span class="nav-text">stash</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%91%BD%E4%BB%A4"><span class="nav-number">1.5.1.</span> <span class="nav-text">命令</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#push"><span class="nav-number">1.5.1.1.</span> <span class="nav-text">push</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#list"><span class="nav-number">1.5.1.2.</span> <span class="nav-text">list</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#show"><span class="nav-number">1.5.1.3.</span> <span class="nav-text">show</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#pop"><span class="nav-number">1.5.1.4.</span> <span class="nav-text">pop</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#apply"><span class="nav-number">1.5.1.5.</span> <span class="nav-text">apply</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#branch-1"><span class="nav-number">1.5.1.6.</span> <span class="nav-text">branch</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#clear"><span class="nav-number">1.5.1.7.</span> <span class="nav-text">clear</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#drop"><span class="nav-number">1.5.1.8.</span> <span class="nav-text">drop</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#create"><span class="nav-number">1.5.1.9.</span> <span class="nav-text">create</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%80%89%E9%A1%B9-4"><span class="nav-number">1.5.2.</span> <span class="nav-text">选项</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#workwtree"><span class="nav-number">1.6.</span> <span class="nav-text">workwtree</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%91%BD%E4%BB%A4-1"><span class="nav-number">1.6.1.</span> <span class="nav-text">命令</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#add-lt-path-gt-lt-commit-ish-gt"><span class="nav-number">1.6.1.1.</span> <span class="nav-text">add &lt;path&gt; [&lt;commit-ish&gt;]</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#list-1"><span class="nav-number">1.6.1.2.</span> <span class="nav-text">list</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#lock"><span class="nav-number">1.6.1.3.</span> <span class="nav-text">lock</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#move"><span class="nav-number">1.6.1.4.</span> <span class="nav-text">move</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#prune"><span class="nav-number">1.6.1.5.</span> <span class="nav-text">prune</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#remove"><span class="nav-number">1.6.1.6.</span> <span class="nav-text">remove</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#repair-lt-path-gt-%E2%80%A6"><span class="nav-number">1.6.1.7.</span> <span class="nav-text">repair [&lt;path&gt;…]</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#unlock"><span class="nav-number">1.6.1.8.</span> <span class="nav-text">unlock</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%80%89%E9%A1%B9-5"><span class="nav-number">1.6.2.</span> <span class="nav-text">选项</span></a></li></ol></li></ol></li></ol>
    
    </div>
  </aside>

</section>
        
      </div>
      
      <footer id="footer">
  

  <div class="container">
      	<div class="row">
	      <p> Powered by <a href="http://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/iTimeTraveler/hexo-theme-hiker" target="_blank">Hexo-theme-hiker</a> </p>
	      <p id="copyRightEn">Copyright &copy; 2019 - 2024 My Wonderland All Rights Reserved.</p>
	      
	      
    		<p class="busuanzi_uv">
				UV : <span id="busuanzi_value_site_uv"></span> |  
				PV : <span id="busuanzi_value_site_pv"></span>
		    </p>
  		   
		</div>

		
  </div>
</footer>


<!-- min height -->

<script>
    var wrapdiv = document.getElementById("wrap");
    var contentdiv = document.getElementById("content");
    var allheader = document.getElementById("allheader");

    wrapdiv.style.minHeight = document.body.offsetHeight + "px";
    if (allheader != null) {
      contentdiv.style.minHeight = document.body.offsetHeight - allheader.offsetHeight - document.getElementById("footer").offsetHeight + "px";
    } else {
      contentdiv.style.minHeight = document.body.offsetHeight - document.getElementById("footer").offsetHeight + "px";
    }
</script>
    </div>
    <!-- <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
    <a href="/categories" class="mobile-nav-link">Categories</a>
  
    <a href="/tags" class="mobile-nav-link">Tags</a>
  
    <a href="/about" class="mobile-nav-link">About</a>
  
</nav> -->
    

<!-- mathjax config similar to math.stackexchange -->

<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      processEscapes: true
    }
  });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
      }
    });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for(i=0; i < all.length; i += 1) {
            all[i].SourceElement().parentNode.className += ' has-jax';
        }
    });
</script>

<script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>


  
<link rel="stylesheet" href="/fancybox/jquery.fancybox.css">

  
<script src="/fancybox/jquery.fancybox.pack.js"></script>




<script src="/js/scripts.js"></script>





  
<script src="/js/dialog.js"></script>










	<script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js">
	</script>






  </div>

  <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" style="display: none;">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h2 class="modal-title" id="myModalLabel">设置</h2>
      </div>
      <hr style="margin-top:0px; margin-bottom:0px; width:80%; border-top: 3px solid #000;">
      <hr style="margin-top:2px; margin-bottom:0px; width:80%; border-top: 1px solid #000;">


      <div class="modal-body">
          <div style="margin:6px;">
            <a data-toggle="collapse" data-parent="#accordion" href="#collapseOne" onclick="javascript:setFontSize();" aria-expanded="true" aria-controls="collapseOne">
              正文字号大小
            </a>
          </div>
          <div id="collapseOne" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingOne">
          <div class="panel-body">
            您已调整页面字体大小
          </div>
        </div>
      


          <div style="margin:6px;">
            <a data-toggle="collapse" data-parent="#accordion" href="#collapseTwo" onclick="javascript:setBackground();" aria-expanded="true" aria-controls="collapseTwo">
              夜间护眼模式
            </a>
        </div>
          <div id="collapseTwo" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingTwo">
          <div class="panel-body">
            夜间模式已经开启，再次单击按钮即可关闭 
          </div>
        </div>

        <div>
            <a data-toggle="collapse" data-parent="#accordion" href="#collapseThree" aria-expanded="true" aria-controls="collapseThree">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;关 于&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a>
        </div>
         <div id="collapseThree" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingThree">
          <div class="panel-body">
            My Wonderland
          </div>
          <div class="panel-body">
            Copyright © 2024 Michael Wang All Rights Reserved.
          </div>
        </div>
      </div>


      <hr style="margin-top:0px; margin-bottom:0px; width:80%; border-top: 1px solid #000;">
      <hr style="margin-top:2px; margin-bottom:0px; width:80%; border-top: 3px solid #000;">
      <div class="modal-footer">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">×</span></button>
      </div>
    </div>
  </div>
</div>
  
  <a id="rocket" href="#top" class=""></a>
  <a id="mwSearch"><div id="search-form-wrap">

    <form class="search-form">
        <input type="text" class="ins-search-input search-form-input" placeholder="" />
        <button type="submit" class="search-form-submit"></button>
    </form>
    <div class="ins-search">
    <div class="ins-search-mask"></div>
    <div class="ins-search-container">
        <div class="ins-input-wrapper">
            <input type="text" class="ins-search-input" placeholder="Type something..." />
            <span class="ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
(function (window) {
    var INSIGHT_CONFIG = {
        TRANSLATION: {
            POSTS: 'Posts',
            PAGES: 'Pages',
            CATEGORIES: 'Categories',
            TAGS: 'Tags',
            UNTITLED: '(Untitled)',
        },
        ROOT_URL: '/',
        CONTENT_URL: '/content.json',
    };
    window.INSIGHT_CONFIG = INSIGHT_CONFIG;
})(window);
</script>

<script src="/js/insight.js"></script>


</div></a>
  <script type="text/javascript" src="/js/totop.js?v=1.0.0" async=""></script>
  
    <a id="menu-switch"><i class="fa fa-bars fa-lg"></i></a>
  
</body>
</html>